import{l as Fn,m as We,B as On,v as dc,u as fc,y as hc,n as gc,w as pc}from "./polymorphic-factory-B6DOF3ls.js";import{r as $,l as _,p as mc,o as yc}from "./chunk-IR6S3I6Y-dbCMCKTV.js";import"./index-Dmddrpv2.js";import{m as xr}from "./events-D5b3GFic.js";import{a as xc,A as wc,b as vc}from "./index-CANQhxZI.js";import{G as bc}from "./Group-Cj9zz6ZP.js";import{a as _c,u as Ec}from "./DirectionProvider-CWgptujd.js";import{P as Xn,u as Sc}from "./Popover-Nt9e4bDX.js";import{c as Nc}from "./create-safe-context-DfDc7BN7.js";import{c as wr,U as Cc,e as Mc}from "./Loader-BQHLcVSB.js";import{i as kc}from "./FocusTrap-DuH8QXSo.js";import{S as Ic}from "./SimpleGrid-TA7EQKHN.js";import{C as po}from "./Card-BKwfwKec.js";import"./px-CiO0pVtX.js";import"./Paper-CeW2lXcr.js";function Ht(e, t){let n=e;for(; (n=n.parentElement)&&!n.matches(t););return n}function $c(e, t, n){for(let o=e-1; o>=0; o-=1)if(!t[o].disabled)return o;if(n){for(let o=t.length-1; o>-1; o-=1)if(!t[o].disabled)return o}return e}function Ac(e, t, n){for(let o=e+1; o<t.length; o+=1)if(!t[o].disabled)return o;if(n){for(let o=0; o<t.length; o+=1)if(!t[o].disabled)return o}return e}function Tc(e, t, n){return Ht(e,n)===Ht(t,n)}function Pc({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:o=!0,activateOnFocus:r=!1,dir:i="rtl",orientation:s}){return c=>{var u;n==null||n(c);const a=Array.from(((u=Ht(c.currentTarget,e))==null?void 0:u.querySelectorAll(t))||[]).filter(h=>Tc(c.currentTarget,h,e)),l=a.findIndex(h=>c.currentTarget===h),f=Ac(l,a,o),d=$c(l,a,o);switch(c.key){case"ArrowRight":break;case"ArrowLeft":break;case"ArrowUp":{c.stopPropagation(),c.preventDefault(),a[d].focus(),r&&a[d].click();break}case"ArrowDown":{c.stopPropagation(),c.preventDefault(),a[f].focus(),r&&a[f].click();break}case"Home":{c.stopPropagation(),c.preventDefault(),!a[0].disabled&&a[0].focus();break}case"End":{c.stopPropagation(),c.preventDefault();const h=a.length-1;!a[h].disabled&&a[h].focus();break}}}}function ge(e, t){return n=>{e==null||e(n),t==null||t(n)}}function Dc(e, t, n){var o;return n?Array.from(((o=Ht(n,t))==null?void 0:o.querySelectorAll(e))||[]).findIndex(r=>r===n):null}function Hc(){const[e,t]=$.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function zc({open:e,close:t,openDelay:n,closeDelay:o}){const r=$.useRef(-1),i=$.useRef(-1),s=()=>{window.clearTimeout(r.current),window.clearTimeout(i.current)},c=()=>{s(),n===0||n===void 0?e():r.current=window.setTimeout(e,n)},a=()=>{s(),o===0||o===void 0?t():i.current=window.setTimeout(t,o)};return $.useEffect(()=>s,[]),{openDropdown:c,closeDropdown:a}}const[Rc,pt]=Nc("Menu component was not found in the tree");var qe={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const Lc={},Yn=Fn((e, t)=>{const{classNames:n,className:o,style:r,styles:i,vars:s,...c}=We("MenuDivider",Lc,e),a=pt();return _.jsx(On,{ref:t,...a.getStyles("divider",{className:o,style:r,styles:i,classNames:n}),...c})});Yn.classes=qe;Yn.displayName="@mantine/core/MenuDivider";const jc={},Wn=Fn((e, t)=>{const{classNames:n,className:o,style:r,styles:i,vars:s,onMouseEnter:c,onMouseLeave:a,onKeyDown:l,children:f,...d}=We("MenuDropdown",jc,e),u=$.useRef(null),h=pt(),g=ge(l, x=>{var E,w;(x.key==="ArrowUp"||x.key==="ArrowDown")&&(x.preventDefault(),(w=(E=u.current)==null?void 0:E.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||w.focus())}),p=ge(c,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.openDropdown()),b=ge(a,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.closeDropdown());return _.jsxs(Xn.Dropdown,{...d,onMouseEnter:p,onMouseLeave:b,role:"menu","aria-orientation":"vertical",ref:wr(t,u),...h.getStyles("dropdown",{className:o,style:r,styles:i,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:g,children:[h.withInitialFocusPlaceholder&&_.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),f]})});Wn.classes=qe;Wn.displayName="@mantine/core/MenuDropdown";const Vc={},qn=dc((e, t)=>{const{classNames:n,className:o,style:r,styles:i,vars:s,color:c,closeMenuOnClick:a,leftSection:l,rightSection:f,children:d,disabled:u,"data-disabled":h,...g}=We("MenuItem",Vc,e),p=pt(),b=fc(),{dir:x}=_c(),E=$.useRef(null),w=p.getItemIndex(E.current),y=g,S=ge(y.onMouseLeave,()=>p.setHovered(-1)),P=ge(y.onMouseEnter,()=>p.setHovered(p.getItemIndex(E.current))),N=ge(y.onClick,()=>{h||(typeof a=="boolean"?a&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately())}),H=ge(y.onFocus,()=>p.setHovered(p.getItemIndex(E.current))),T=c?b.variantColorResolver({color:c,theme:b,variant:"light"}):void 0,A=c?hc({color:c,theme:b}):null;return _.jsxs(Cc,{...g,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:H,...p.getStyles("item",{className:o,style:r,styles:i,classNames:n}),ref:wr(E,t),role:"menuitem",disabled:u,"data-menu-item":!0,"data-disabled":u||h||void 0,"data-hovered":p.hovered===w?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:P,onMouseLeave:S,onClick:N,onKeyDown:Pc({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:x,orientation:"vertical",onKeyDown:y.onKeyDown}),__vars:{"--menu-item-color":A!=null&&A.isThemeColor&&(A==null?void 0:A.shade)===void 0?`var(--mantine-color-${A.color}-6)`:T==null?void 0:T.color,"--menu-item-hover":T==null?void 0:T.hover},children:[l&&_.jsx("div",{...p.getStyles("itemSection",{styles:i,classNames:n}),"data-position":"left",children:l}),d&&_.jsx("div",{...p.getStyles("itemLabel",{styles:i,classNames:n}),children:d}),f&&_.jsx("div",{...p.getStyles("itemSection",{styles:i,classNames:n}),"data-position":"right",children:f})]})});qn.classes=qe;qn.displayName="@mantine/core/MenuItem";const Bc={},Gn=Fn((e, t)=>{const{classNames:n,className:o,style:r,styles:i,vars:s,...c}=We("MenuLabel",Bc,e),a=pt();return _.jsx(On,{ref:t,...a.getStyles("label",{className:o,style:r,styles:i,classNames:n}),...c})});Gn.classes=qe;Gn.displayName="@mantine/core/MenuLabel";const Fc={refProp:"ref"},vr=$.forwardRef((e, t)=>{const{children:n,refProp:o,...r}=We("MenuTarget",Fc,e);if(!kc(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const i=pt(),s=n.props,c=ge(s.onClick,()=>{i.trigger==="click"?i.toggleDropdown():i.trigger==="click-hover"&&(i.setOpenedViaClick(!0),i.opened||i.openDropdown())}),a=ge(s.onMouseEnter,()=>(i.trigger==="hover"||i.trigger==="click-hover")&&i.openDropdown()),l=ge(s.onMouseLeave,()=>{(i.trigger==="hover"||i.trigger==="click-hover"&&!i.openedViaClick)&&i.closeDropdown()});return _.jsx(Xn.Target,{refProp:o,popupType:"menu",ref:t,...r,children:$.cloneElement(n,{onClick:c,onMouseEnter:a,onMouseLeave:l,"data-expanded":i.opened?!0:void 0})})});vr.displayName="@mantine/core/MenuTarget";const Oc={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function se(e){const t=We("Menu",Oc,e),{children:n,onOpen:o,onClose:r,opened:i,defaultOpened:s,trapFocus:c,onChange:a,closeOnItemClick:l,loop:f,closeOnEscape:d,trigger:u,openDelay:h,closeDelay:g,classNames:p,styles:b,unstyled:x,variant:E,vars:w,menuItemTabIndex:y,keepMounted:S,withInitialFocusPlaceholder:P,...N}=t,H=gc({name:"Menu",classes:qe,props:t,classNames:p,styles:b,unstyled:x}),[T,{setHovered:A,resetHovered:L}]=Hc(),[R,z]=Sc({value:i,defaultValue:s,finalValue:!1,onChange:a}),[m,M]=$.useState(!1),v=()=>{z(!1),M(!1),R&&(r==null||r())},I=()=>{z(!0),!R&&(o==null||o())},C=()=>{R?v():I()},{openDropdown:k,closeDropdown:D}=zc({open:I,close:v,closeDelay:g,openDelay:h}),j= F=>Dc("[data-menu-item]","[data-menu-dropdown]",F),{resolvedClassNames:V,resolvedStyles:Y}=Ec({classNames:p,styles:b,props:t});return Mc(()=>{L()},[R]),_.jsx(Rc,{value:{getStyles:H,opened:R,toggleDropdown:C,getItemIndex:j,hovered:T,setHovered:A,openedViaClick:m,setOpenedViaClick:M,closeOnItemClick:l,closeDropdown:u==="click"?v:D,openDropdown:u==="click"?I:k,closeDropdownImmediately:v,loop:f,trigger:u,unstyled:x,menuItemTabIndex:y,withInitialFocusPlaceholder:P},children:_.jsx(Xn,{...N,opened:R,onChange:C,defaultOpened:s,trapFocus:S?!1:c,closeOnEscape:d,__staticSelector:"Menu",classNames:V,styles:Y,unstyled:x,variant:E,keepMounted:S,children:n})})}se.extend= e=>e;se.classes=qe;se.displayName="@mantine/core/Menu";se.Item=qn;se.Label=Gn;se.Dropdown=Wn;se.Target=vr;se.Divider=Yn;function oe(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o; n<e.length; n++)(o=oe(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Xc={value:()=>{}};function Wt(){for(var e=0,t=arguments.length,n={},o; e<t; ++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new At(n)}function At(e){this._=e}function Yc(e, t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}At.prototype=Wt.prototype={constructor:At,on:function(e, t){var n=this._,o=Yc(e+"",n),r,i=-1,s=o.length;if(arguments.length<2){for(; ++i<s;)if((r=(e=o[i]).type)&&(r=Wc(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(; ++i<s;)if(r=(e=o[i]).type)n[r]=mo(n[r],e.name,t);else if(t==null)for(r in n)n[r]=mo(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new At(e)},call:function(e, t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i; o<r; ++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length; o<r; ++o)i[o].value.apply(t,n)},apply:function(e, t, n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length; r<i; ++r)o[r].value.apply(t,n)}};function Wc(e, t){for(var n=0,o=e.length,r; n<o; ++n)if((r=e[n]).name===t)return r.value}function mo(e, t, n){for(var o=0,r=e.length; o<r; ++o)if(e[o].name===t){e[o]=Xc,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Nn="http://www.w3.org/1999/xhtml";const yo={svg:"http://www.w3.org/2000/svg",xhtml:Nn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function qt(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),yo.hasOwnProperty(t)?{space:yo[t],local:e}:e}function qc(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Nn&&t.documentElement.namespaceURI===Nn?t.createElement(e):t.createElementNS(n,e)}}function Gc(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function br(e){var t=qt(e);return(t.local?Gc:qc)(t)}function Uc(){}function Un(e){return e==null?Uc:function(){return this.querySelector(e)}}function Kc(e){typeof e!="function"&&(e=Un(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0; r<n; ++r)for(var i=t[r],s=i.length,c=o[r]=new Array(s),a,l,f=0; f<s; ++f)(a=i[f])&&(l=e.call(a,a.__data__,f,i))&&("__data__"in a&&(l.__data__=a.__data__),c[f]=l);return new ae(o,this._parents)}function Zc(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Qc(){return[]}function _r(e){return e==null?Qc:function(){return this.querySelectorAll(e)}}function Jc(e){return function(){return Zc(e.apply(this,arguments))}}function ea(e){typeof e=="function"?e=Jc(e):e=_r(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0; i<n; ++i)for(var s=t[i],c=s.length,a,l=0; l<c; ++l)(a=s[l])&&(o.push(e.call(a,a.__data__,l,s)),r.push(a));return new ae(o,r)}function Er(e){return function(){return this.matches(e)}}function Sr(e){return function(t){return t.matches(e)}}var ta=Array.prototype.find;function na(e){return function(){return ta.call(this.children,e)}}function oa(){return this.firstElementChild}function ra(e){return this.select(e==null?oa:na(typeof e=="function"?e:Sr(e)))}var ia=Array.prototype.filter;function sa(){return Array.from(this.children)}function ca(e){return function(){return ia.call(this.children,e)}}function aa(e){return this.selectAll(e==null?sa:ca(typeof e=="function"?e:Sr(e)))}function ua(e){typeof e!="function"&&(e=Er(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0; r<n; ++r)for(var i=t[r],s=i.length,c=o[r]=[],a,l=0; l<s; ++l)(a=i[l])&&e.call(a,a.__data__,l,i)&&c.push(a);return new ae(o,this._parents)}function Nr(e){return new Array(e.length)}function la(){return new ae(this._enter||this._groups.map(Nr),this._parents)}function zt(e, t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}zt.prototype={constructor:zt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e, t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function da(e){return function(){return e}}function fa(e, t, n, o, r, i){for(var s=0,c,a=t.length,l=i.length; s<l; ++s)(c=t[s])?(c.__data__=i[s],o[s]=c):n[s]=new zt(e,i[s]);for(; s<a; ++s)(c=t[s])&&(r[s]=c)}function ha(e, t, n, o, r, i, s){var c,a,l=new Map,f=t.length,d=i.length,u=new Array(f),h;for(c=0; c<f; ++c)(a=t[c])&&(u[c]=h=s.call(a,a.__data__,c,t)+"",l.has(h)?r[c]=a:l.set(h,a));for(c=0; c<d; ++c)h=s.call(e,i[c],c,i)+"",(a=l.get(h))?(o[c]=a,a.__data__=i[c],l.delete(h)):n[c]=new zt(e,i[c]);for(c=0; c<f; ++c)(a=t[c])&&l.get(u[c])===a&&(r[c]=a)}function ga(e){return e.__data__}function pa(e, t){if(!arguments.length)return Array.from(this,ga);var n=t?ha:fa,o=this._parents,r=this._groups;typeof e!="function"&&(e=da(e));for(var i=r.length,s=new Array(i),c=new Array(i),a=new Array(i),l=0; l<i; ++l){var f=o[l],d=r[l],u=d.length,h=ma(e.call(f,f&&f.__data__,l,o)),g=h.length,p=c[l]=new Array(g),b=s[l]=new Array(g),x=a[l]=new Array(u);n(f,d,p,b,x,h,t);for(var E=0,w=0,y,S; E<g; ++E)if(y=p[E]){for(E>=w&&(w=E+1); !(S=b[w])&&++w<g;);y._next=S||null}}return s=new ae(s,o),s._enter=c,s._exit=a,s}function ma(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ya(){return new ae(this._exit||this._groups.map(Nr),this._parents)}function xa(e, t, n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function wa(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,s=Math.min(r,i),c=new Array(r),a=0; a<s; ++a)for(var l=n[a],f=o[a],d=l.length,u=c[a]=new Array(d),h,g=0; g<d; ++g)(h=l[g]||f[g])&&(u[g]=h);for(; a<r; ++a)c[a]=n[a];return new ae(c,this._parents)}function va(){for(var e=this._groups,t=-1,n=e.length; ++t<n;)for(var o=e[t],r=o.length-1,i=o[r],s; --r>=0;)(s=o[r])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function ba(e){e||(e=_a);function t(d, u){return d&&u?e(d.__data__,u.__data__):!d-!u}for(var n=this._groups,o=n.length,r=new Array(o),i=0; i<o; ++i){for(var s=n[i],c=s.length,a=r[i]=new Array(c),l,f=0; f<c; ++f)(l=s[f])&&(a[f]=l);a.sort(t)}return new ae(r,this._parents).order()}function _a(e, t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ea(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Sa(){return Array.from(this)}function Na(){for(var e=this._groups,t=0,n=e.length; t<n; ++t)for(var o=e[t],r=0,i=o.length; r<i; ++r){var s=o[r];if(s)return s}return null}function Ca(){let e=0;for(const t of this)++e;return e}function Ma(){return!this.node()}function ka(e){for(var t=this._groups,n=0,o=t.length; n<o; ++n)for(var r=t[n],i=0,s=r.length,c; i<s; ++i)(c=r[i])&&e.call(c,c.__data__,i,r);return this}function Ia(e){return function(){this.removeAttribute(e)}}function $a(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Aa(e, t){return function(){this.setAttribute(e,t)}}function Ta(e, t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Pa(e, t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Da(e, t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ha(e, t){var n=qt(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?$a:Ia:typeof t=="function"?n.local?Da:Pa:n.local?Ta:Aa)(n,t))}function Cr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function za(e){return function(){this.style.removeProperty(e)}}function Ra(e, t, n){return function(){this.style.setProperty(e,t,n)}}function La(e, t, n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function ja(e, t, n){return arguments.length>1?this.each((t==null?za:typeof t=="function"?La:Ra)(e,t,n??"")):je(this.node(),e)}function je(e, t){return e.style.getPropertyValue(t)||Cr(e).getComputedStyle(e,null).getPropertyValue(t)}function Va(e){return function(){delete this[e]}}function Ba(e, t){return function(){this[e]=t}}function Fa(e, t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Oa(e, t){return arguments.length>1?this.each((t==null?Va:typeof t=="function"?Fa:Ba)(e,t)):this.node()[e]}function Mr(e){return e.trim().split(/^|\s+/)}function Kn(e){return e.classList||new kr(e)}function kr(e){this._node=e,this._names=Mr(e.getAttribute("class")||"")}kr.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ir(e, t){for(var n=Kn(e),o=-1,r=t.length; ++o<r;)n.add(t[o])}function $r(e, t){for(var n=Kn(e),o=-1,r=t.length; ++o<r;)n.remove(t[o])}function Xa(e){return function(){Ir(this,e)}}function Ya(e){return function(){$r(this,e)}}function Wa(e, t){return function(){(t.apply(this,arguments)?Ir:$r)(this,e)}}function qa(e, t){var n=Mr(e+"");if(arguments.length<2){for(var o=Kn(this.node()),r=-1,i=n.length; ++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Wa:t?Xa:Ya)(n,t))}function Ga(){this.textContent=""}function Ua(e){return function(){this.textContent=e}}function Ka(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Za(e){return arguments.length?this.each(e==null?Ga:(typeof e=="function"?Ka:Ua)(e)):this.node().textContent}function Qa(){this.innerHTML=""}function Ja(e){return function(){this.innerHTML=e}}function eu(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function tu(e){return arguments.length?this.each(e==null?Qa:(typeof e=="function"?eu:Ja)(e)):this.node().innerHTML}function nu(){this.nextSibling&&this.parentNode.appendChild(this)}function ou(){return this.each(nu)}function ru(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function iu(){return this.each(ru)}function su(e){var t=typeof e=="function"?e:br(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function cu(){return null}function au(e, t){var n=typeof e=="function"?e:br(e),o=t==null?cu:typeof t=="function"?t:Un(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function uu(){var e=this.parentNode;e&&e.removeChild(this)}function lu(){return this.each(uu)}function du(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fu(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function hu(e){return this.select(e?fu:du)}function gu(e){return arguments.length?this.property("__data__",e):this.node().__data__}function pu(e){return function(t){e.call(this,t,this.__data__)}}function mu(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function yu(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i; n<r; ++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function xu(e, t, n){return function(){var o=this.__on,r,i=pu(t);if(o){for(var s=0,c=o.length; s<c; ++s)if((r=o[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function wu(e, t, n){var o=mu(e+""),r,i=o.length,s;if(arguments.length<2){var c=this.node().__on;if(c){for(var a=0,l=c.length,f; a<l; ++a)for(r=0,f=c[a]; r<i; ++r)if((s=o[r]).type===f.type&&s.name===f.name)return f.value}return}for(c=t?xu:yu,r=0; r<i; ++r)this.each(c(o[r],t,n));return this}function Ar(e, t, n){var o=Cr(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function vu(e, t){return function(){return Ar(this,e,t)}}function bu(e, t){return function(){return Ar(this,e,t.apply(this,arguments))}}function _u(e, t){return this.each((typeof t=="function"?bu:vu)(e,t))}function*Eu(){for(var e=this._groups,t=0,n=e.length; t<n; ++t)for(var o=e[t],r=0,i=o.length,s; r<i; ++r)(s=o[r])&&(yield s)}var Tr=[null];function ae(e, t){this._groups=e,this._parents=t}function mt(){return new ae([[document.documentElement]],Tr)}function Su(){return this}ae.prototype=mt.prototype={constructor:ae,select:Kc,selectAll:ea,selectChild:ra,selectChildren:aa,filter:ua,data:pa,enter:la,exit:ya,join:xa,merge:wa,selection:Su,order:va,sort:ba,call:Ea,nodes:Sa,node:Na,size:Ca,empty:Ma,each:ka,attr:Ha,style:ja,property:Oa,classed:qa,text:Za,html:tu,raise:ou,lower:iu,append:su,insert:au,remove:lu,clone:hu,datum:gu,on:wu,dispatch:_u,[Symbol.iterator]:Eu};function ce(e){return typeof e=="string"?new ae([[document.querySelector(e)]],[document.documentElement]):new ae([[e]],Tr)}function Nu(e){let t;for(; t=e.sourceEvent;)e=t;return e}function le(e, t){if(e=Nu(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const Cu={passive:!1},it={capture:!0,passive:!1};function pn(e){e.stopImmediatePropagation()}function Re(e){e.preventDefault(),e.stopImmediatePropagation()}function Pr(e){var t=e.document.documentElement,n=ce(e).on("dragstart.drag",Re,it);"onselectstart"in t?n.on("selectstart.drag",Re,it):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Dr(e, t){var n=e.document.documentElement,o=ce(e).on("dragstart.drag",null);t&&(o.on("click.drag",Re,it),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const _t= e=>()=>e;function Cn(e, {sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:s,y:c,dx:a,dy:l,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:f}})}Cn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Mu(e){return!e.ctrlKey&&!e.button}function ku(){return this.parentNode}function Iu(e, t){return t??{x:e.x,y:e.y}}function $u(){return navigator.maxTouchPoints||"ontouchstart"in this}function Hr(){var e=Mu,t=ku,n=Iu,o=$u,r={},i=Wt("start","drag","end"),s=0,c,a,l,f,d=0;function u(y){y.on("mousedown.drag",h).filter(o).on("touchstart.drag",b).on("touchmove.drag",x,Cu).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(y, S){if(!(f||!e.call(this,y,S))){var P=w(this,t.call(this,y,S),y,S,"mouse");P&&(ce(y.view).on("mousemove.drag",g,it).on("mouseup.drag",p,it),Pr(y.view),pn(y),l=!1,c=y.clientX,a=y.clientY,P("start",y))}}function g(y){if(Re(y),!l){var S=y.clientX-c,P=y.clientY-a;l=S*S+P*P>d}r.mouse("drag",y)}function p(y){ce(y.view).on("mousemove.drag mouseup.drag",null),Dr(y.view,l),Re(y),r.mouse("end",y)}function b(y, S){if(e.call(this,y,S)){var P=y.changedTouches,N=t.call(this,y,S),H=P.length,T,A;for(T=0; T<H; ++T)(A=w(this,N,y,S,P[T].identifier,P[T]))&&(pn(y),A("start",y,P[T]))}}function x(y){var S=y.changedTouches,P=S.length,N,H;for(N=0; N<P; ++N)(H=r[S[N].identifier])&&(Re(y),H("drag",y,S[N]))}function E(y){var S=y.changedTouches,P=S.length,N,H;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),N=0; N<P; ++N)(H=r[S[N].identifier])&&(pn(y),H("end",y,S[N]))}function w(y, S, P, N, H, T){var A=i.copy(),L=le(T||P,S),R,z,m;if((m=n.call(y,new Cn("beforestart",{sourceEvent:P,target:u,identifier:H,active:s,x:L[0],y:L[1],dx:0,dy:0,dispatch:A}),N))!=null)return R=m.x-L[0]||0,z=m.y-L[1]||0,function M(v, I, C){var k=L,D;switch(v){case"start":r[H]=M,D=s++;break;case"end":delete r[H],--s;case"drag":L=le(C||I,S),D=s;break}A.call(v,y,new Cn(v,{sourceEvent:I,subject:m,target:u,identifier:H,active:D,x:L[0]+R,y:L[1]+z,dx:L[0]-k[0],dy:L[1]-k[1],dispatch:A}),N)}}return u.filter=function(y){return arguments.length?(e=typeof y=="function"?y:_t(!!y),u):e},u.container=function(y){return arguments.length?(t=typeof y=="function"?y:_t(y),u):t},u.subject=function(y){return arguments.length?(n=typeof y=="function"?y:_t(y),u):n},u.touchable=function(y){return arguments.length?(o=typeof y=="function"?y:_t(!!y),u):o},u.on=function(){var y=i.on.apply(i,arguments);return y===i?u:y},u.clickDistance=function(y){return arguments.length?(d=(y=+y)*y,u):Math.sqrt(d)},u}function Zn(e, t, n){e.prototype=t.prototype=n,n.constructor=e}function zr(e, t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function yt(){}var st=.7,Rt=1/st,Le="\\s*([+-]?\\d+)\\s*",ct="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",pe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Au=/^#([0-9a-f]{3,8})$/,Tu=new RegExp(`^rgb\\(${Le},${Le},${Le}\\)$`),Pu=new RegExp(`^rgb\\(${pe},${pe},${pe}\\)$`),Du=new RegExp(`^rgba\\(${Le},${Le},${Le},${ct}\\)$`),Hu=new RegExp(`^rgba\\(${pe},${pe},${pe},${ct}\\)$`),zu=new RegExp(`^hsl\\(${ct},${pe},${pe}\\)$`),Ru=new RegExp(`^hsla\\(${ct},${pe},${pe},${ct}\\)$`),xo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Zn(yt,at,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:wo,formatHex:wo,formatHex8:Lu,formatHsl:ju,formatRgb:vo,toString:vo});function wo(){return this.rgb().formatHex()}function Lu(){return this.rgb().formatHex8()}function ju(){return Rr(this).formatHsl()}function vo(){return this.rgb().formatRgb()}function at(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Au.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?bo(t):n===3?new ie(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Et(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Et(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Tu.exec(e))?new ie(t[1],t[2],t[3],1):(t=Pu.exec(e))?new ie(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Du.exec(e))?Et(t[1],t[2],t[3],t[4]):(t=Hu.exec(e))?Et(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=zu.exec(e))?So(t[1],t[2]/100,t[3]/100,1):(t=Ru.exec(e))?So(t[1],t[2]/100,t[3]/100,t[4]):xo.hasOwnProperty(e)?bo(xo[e]):e==="transparent"?new ie(NaN,NaN,NaN,0):null}function bo(e){return new ie(e>>16&255,e>>8&255,e&255,1)}function Et(e, t, n, o){return o<=0&&(e=t=n=NaN),new ie(e,t,n,o)}function Vu(e){return e instanceof yt||(e=at(e)),e?(e=e.rgb(),new ie(e.r,e.g,e.b,e.opacity)):new ie}function Mn(e, t, n, o){return arguments.length===1?Vu(e):new ie(e,t,n,o??1)}function ie(e, t, n, o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Zn(ie,Mn,zr(yt,{brighter(e){return e=e==null?Rt:Math.pow(Rt,e),new ie(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?st:Math.pow(st,e),new ie(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ie($e(this.r),$e(this.g),$e(this.b),Lt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_o,formatHex:_o,formatHex8:Bu,formatRgb:Eo,toString:Eo}));function _o(){return`#${Ie(this.r)}${Ie(this.g)}${Ie(this.b)}`}function Bu(){return`#${Ie(this.r)}${Ie(this.g)}${Ie(this.b)}${Ie((isNaN(this.opacity)?1:this.opacity)*255)}`}function Eo(){const e=Lt(this.opacity);return`${e===1?"rgb(":"rgba("}${$e(this.r)}, ${$e(this.g)}, ${$e(this.b)}${e===1?")":`, ${e})`}`}function Lt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function $e(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ie(e){return e=$e(e),(e<16?"0":"")+e.toString(16)}function So(e, t, n, o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new de(e,t,n,o)}function Rr(e){if(e instanceof de)return new de(e.h,e.s,e.l,e.opacity);if(e instanceof yt||(e=at(e)),!e)return new de;if(e instanceof de)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),s=NaN,c=i-r,a=(i+r)/2;return c?(t===i?s=(n-o)/c+(n<o)*6:n===i?s=(o-t)/c+2:s=(t-n)/c+4,c/=a<.5?i+r:2-i-r,s*=60):c=a>0&&a<1?0:s,new de(s,c,a,e.opacity)}function Fu(e, t, n, o){return arguments.length===1?Rr(e):new de(e,t,n,o??1)}function de(e, t, n, o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Zn(de,Fu,zr(yt,{brighter(e){return e=e==null?Rt:Math.pow(Rt,e),new de(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?st:Math.pow(st,e),new de(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new ie(mn(e>=240?e-240:e+120,r,o),mn(e,r,o),mn(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new de(No(this.h),St(this.s),St(this.l),Lt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Lt(this.opacity);return`${e===1?"hsl(":"hsla("}${No(this.h)}, ${St(this.s)*100}%, ${St(this.l)*100}%${e===1?")":`, ${e})`}`}}));function No(e){return e=(e||0)%360,e<0?e+360:e}function St(e){return Math.max(0,Math.min(1,e||0))}function mn(e, t, n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Lr= e=>()=>e;function Ou(e, t){return function(n){return e+n*t}}function Xu(e, t, n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Yu(e){return(e=+e)==1?jr:function(t, n){return n-t?Xu(t,n,e):Lr(isNaN(t)?n:t)}}function jr(e, t){var n=t-e;return n?Ou(e,n):Lr(isNaN(e)?t:e)}const Co=function e(t){var n=Yu(t);function o(r, i){var s=n((r=Mn(r)).r,(i=Mn(i)).r),c=n(r.g,i.g),a=n(r.b,i.b),l=jr(r.opacity,i.opacity);return function(f){return r.r=s(f),r.g=c(f),r.b=a(f),r.opacity=l(f),r+""}}return o.gamma=e,o}(1);function Ne(e, t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var kn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yn=new RegExp(kn.source,"g");function Wu(e){return function(){return e}}function qu(e){return function(t){return e(t)+""}}function Gu(e, t){var n=kn.lastIndex=yn.lastIndex=0,o,r,i,s=-1,c=[],a=[];for(e=e+"",t=t+""; (o=kn.exec(e))&&(r=yn.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),c[s]?c[s]+=i:c[++s]=i),(o=o[0])===(r=r[0])?c[s]?c[s]+=r:c[++s]=r:(c[++s]=null,a.push({i:s,x:Ne(o,r)})),n=yn.lastIndex;return n<t.length&&(i=t.slice(n),c[s]?c[s]+=i:c[++s]=i),c.length<2?a[0]?qu(a[0].x):Wu(t):(t=a.length,function(l){for(var f=0,d; f<t; ++f)c[(d=a[f]).i]=d.x(l);return c.join("")})}var Mo=180/Math.PI,In={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Vr(e, t, n, o, r, i){var s,c,a;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(a=e*n+t*o)&&(n-=e*a,o-=t*a),(c=Math.sqrt(n*n+o*o))&&(n/=c,o/=c,a/=c),e*o<t*n&&(e=-e,t=-t,a=-a,s=-s),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Mo,skewX:Math.atan(a)*Mo,scaleX:s,scaleY:c}}var Nt;function Uu(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?In:Vr(t.a,t.b,t.c,t.d,t.e,t.f)}function Ku(e){return e==null||(Nt||(Nt=document.createElementNS("http://www.w3.org/2000/svg","g")),Nt.setAttribute("transform",e),!(e=Nt.transform.baseVal.consolidate()))?In:(e=e.matrix,Vr(e.a,e.b,e.c,e.d,e.e,e.f))}function Br(e, t, n, o){function r(l){return l.length?l.pop()+" ":""}function i(l, f, d, u, h, g){if(l!==d||f!==u){var p=h.push("translate(",null,t,null,n);g.push({i:p-4,x:Ne(l,d)},{i:p-2,x:Ne(f,u)})}else(d||u)&&h.push("translate("+d+t+u+n)}function s(l, f, d, u){l!==f?(l-f>180?f+=360:f-l>180&&(l+=360),u.push({i:d.push(r(d)+"rotate(",null,o)-2,x:Ne(l,f)})):f&&d.push(r(d)+"rotate("+f+o)}function c(l, f, d, u){l!==f?u.push({i:d.push(r(d)+"skewX(",null,o)-2,x:Ne(l,f)}):f&&d.push(r(d)+"skewX("+f+o)}function a(l, f, d, u, h, g){if(l!==d||f!==u){var p=h.push(r(h)+"scale(",null,",",null,")");g.push({i:p-4,x:Ne(l,d)},{i:p-2,x:Ne(f,u)})}else(d!==1||u!==1)&&h.push(r(h)+"scale("+d+","+u+")")}return function(l, f){var d=[],u=[];return l=e(l),f=e(f),i(l.translateX,l.translateY,f.translateX,f.translateY,d,u),s(l.rotate,f.rotate,d,u),c(l.skewX,f.skewX,d,u),a(l.scaleX,l.scaleY,f.scaleX,f.scaleY,d,u),l=f=null,function(h){for(var g=-1,p=u.length,b; ++g<p;)d[(b=u[g]).i]=b.x(h);return d.join("")}}}var Zu=Br(Uu,"px, ","px)","deg)"),Qu=Br(Ku,", ",")",")"),Ju=1e-12;function ko(e){return((e=Math.exp(e))+1/e)/2}function el(e){return((e=Math.exp(e))-1/e)/2}function tl(e){return((e=Math.exp(2*e))-1)/(e+1)}const nl=function e(t, n, o){function r(i, s){var c=i[0],a=i[1],l=i[2],f=s[0],d=s[1],u=s[2],h=f-c,g=d-a,p=h*h+g*g,b,x;if(p<Ju)x=Math.log(u/l)/t,b=function(N){return[c+N*h,a+N*g,l*Math.exp(t*N*x)]};else{var E=Math.sqrt(p),w=(u*u-l*l+o*p)/(2*l*n*E),y=(u*u-l*l-o*p)/(2*u*n*E),S=Math.log(Math.sqrt(w*w+1)-w),P=Math.log(Math.sqrt(y*y+1)-y);x=(P-S)/t,b=function(N){var H=N*x,T=ko(S),A=l/(n*E)*(T*tl(t*H+S)-el(S));return[c+A*h,a+A*g,l*T/ko(t*H+S)]}}return b.duration=x*1e3*t/Math.SQRT2,b}return r.rho=function(i){var s=Math.max(.001,+i),c=s*s,a=c*c;return e(s,c,a)},r}(Math.SQRT2,2,4);var Ve=0,tt=0,Je=0,Fr=1e3,jt,nt,Vt=0,Te=0,Gt=0,ut=typeof performance=="object"&&performance.now?performance:Date,Or=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Qn(){return Te||(Or(ol),Te=ut.now()+Gt)}function ol(){Te=0}function Bt(){this._call=this._time=this._next=null}Bt.prototype=Xr.prototype={constructor:Bt,restart:function(e, t, n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Qn():+n)+(t==null?0:+t),!this._next&&nt!==this&&(nt?nt._next=this:jt=this,nt=this),this._call=e,this._time=n,$n()},stop:function(){this._call&&(this._call=null,this._time=1/0,$n())}};function Xr(e, t, n){var o=new Bt;return o.restart(e,t,n),o}function rl(){Qn(),++Ve;for(var e=jt,t; e;)(t=Te-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ve}function Io(){Te=(Vt=ut.now())+Gt,Ve=tt=0;try{rl()}finally{Ve=0,sl(),Te=0}}function il(){var e=ut.now(),t=e-Vt;t>Fr&&(Gt-=t,Vt=e)}function sl(){for(var e,t=jt,n,o=1/0; t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:jt=n);nt=e,$n(o)}function $n(e){if(!Ve){tt&&(tt=clearTimeout(tt));var t=e-Te;t>24?(e<1/0&&(tt=setTimeout(Io,e-ut.now()-Gt)),Je&&(Je=clearInterval(Je))):(Je||(Vt=ut.now(),Je=setInterval(il,Fr)),Ve=1,Or(Io))}}function $o(e, t, n){var o=new Bt;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var cl=Wt("start","end","cancel","interrupt"),al=[],Yr=0,Ao=1,An=2,Tt=3,To=4,Tn=5,Pt=6;function Ut(e, t, n, o, r, i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;ul(e,n,{name:t,index:o,group:r,on:cl,tween:al,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Yr})}function Jn(e, t){var n=he(e,t);if(n.state>Yr)throw new Error("too late; already scheduled");return n}function me(e, t){var n=he(e,t);if(n.state>Tt)throw new Error("too late; already running");return n}function he(e, t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ul(e, t, n){var o=e.__transition,r;o[t]=n,n.timer=Xr(i,0,n.time);function i(l){n.state=Ao,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var f,d,u,h;if(n.state!==Ao)return a();for(f in o)if(h=o[f],h.name===n.name){if(h.state===Tt)return $o(s);h.state===To?(h.state=Pt,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[f]):+f<t&&(h.state=Pt,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[f])}if($o(function(){n.state===Tt&&(n.state=To,n.timer.restart(c,n.delay,n.time),c(l))}),n.state=An,n.on.call("start",e,e.__data__,n.index,n.group),n.state===An){for(n.state=Tt,r=new Array(u=n.tween.length),f=0,d=-1; f<u; ++f)(h=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=h);r.length=d+1}}function c(l){for(var f=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(a),n.state=Tn,1),d=-1,u=r.length; ++d<u;)r[d].call(e,f);n.state===Tn&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){n.state=Pt,n.timer.stop(),delete o[t];for(var l in o)return;delete e.__transition}}function Dt(e, t){var n=e.__transition,o,r,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((o=n[s]).name!==t){i=!1;continue}r=o.state>An&&o.state<Tn,o.state=Pt,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[s]}i&&delete e.__transition}}function ll(e){return this.each(function(){Dt(this,e)})}function dl(e, t){var n,o;return function(){var r=me(this,e),i=r.tween;if(i!==n){o=n=i;for(var s=0,c=o.length; s<c; ++s)if(o[s].name===t){o=o.slice(),o.splice(s,1);break}}r.tween=o}}function fl(e, t, n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=me(this,e),s=i.tween;if(s!==o){r=(o=s).slice();for(var c={name:t,value:n},a=0,l=r.length; a<l; ++a)if(r[a].name===t){r[a]=c;break}a===l&&r.push(c)}i.tween=r}}function hl(e, t){var n=this._id;if(e+="",arguments.length<2){for(var o=he(this.node(),n).tween,r=0,i=o.length,s; r<i; ++r)if((s=o[r]).name===e)return s.value;return null}return this.each((t==null?dl:fl)(n,e,t))}function eo(e, t, n){var o=e._id;return e.each(function(){var r=me(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return he(r,o).value[t]}}function Wr(e, t){var n;return(typeof t=="number"?Ne:t instanceof at?Co:(n=at(t))?(t=n,Co):Gu)(e,t)}function gl(e){return function(){this.removeAttribute(e)}}function pl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ml(e, t, n){var o,r=n+"",i;return function(){var s=this.getAttribute(e);return s===r?null:s===o?i:i=t(o=s,n)}}function yl(e, t, n){var o,r=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===o?i:i=t(o=s,n)}}function xl(e, t, n){var o,r,i;return function(){var s,c=n(this),a;return c==null?void this.removeAttribute(e):(s=this.getAttribute(e),a=c+"",s===a?null:s===o&&a===r?i:(r=a,i=t(o=s,c)))}}function wl(e, t, n){var o,r,i;return function(){var s,c=n(this),a;return c==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),a=c+"",s===a?null:s===o&&a===r?i:(r=a,i=t(o=s,c)))}}function vl(e, t){var n=qt(e),o=n==="transform"?Qu:Wr;return this.attrTween(e,typeof t=="function"?(n.local?wl:xl)(n,o,eo(this,"attr."+e,t)):t==null?(n.local?pl:gl)(n):(n.local?yl:ml)(n,o,t))}function bl(e, t){return function(n){this.setAttribute(e,t.call(this,n))}}function _l(e, t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function El(e, t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&_l(e,i)),n}return r._value=t,r}function Sl(e, t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&bl(e,i)),n}return r._value=t,r}function Nl(e, t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=qt(e);return this.tween(n,(o.local?El:Sl)(o,t))}function Cl(e, t){return function(){Jn(this,e).delay=+t.apply(this,arguments)}}function Ml(e, t){return t=+t,function(){Jn(this,e).delay=t}}function kl(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Cl:Ml)(t,e)):he(this.node(),t).delay}function Il(e, t){return function(){me(this,e).duration=+t.apply(this,arguments)}}function $l(e, t){return t=+t,function(){me(this,e).duration=t}}function Al(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Il:$l)(t,e)):he(this.node(),t).duration}function Tl(e, t){if(typeof t!="function")throw new Error;return function(){me(this,e).ease=t}}function Pl(e){var t=this._id;return arguments.length?this.each(Tl(t,e)):he(this.node(),t).ease}function Dl(e, t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;me(this,e).ease=n}}function Hl(e){if(typeof e!="function")throw new Error;return this.each(Dl(this._id,e))}function zl(e){typeof e!="function"&&(e=Er(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0; r<n; ++r)for(var i=t[r],s=i.length,c=o[r]=[],a,l=0; l<s; ++l)(a=i[l])&&e.call(a,a.__data__,l,i)&&c.push(a);return new ve(o,this._parents,this._name,this._id)}function Rl(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),s=new Array(o),c=0; c<i; ++c)for(var a=t[c],l=n[c],f=a.length,d=s[c]=new Array(f),u,h=0; h<f; ++h)(u=a[h]||l[h])&&(d[h]=u);for(; c<o; ++c)s[c]=t[c];return new ve(s,this._parents,this._name,this._id)}function Ll(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function jl(e, t, n){var o,r,i=Ll(t)?Jn:me;return function(){var s=i(this,e),c=s.on;c!==o&&(r=(o=c).copy()).on(t,n),s.on=r}}function Vl(e, t){var n=this._id;return arguments.length<2?he(this.node(),n).on.on(e):this.each(jl(n,e,t))}function Bl(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Fl(){return this.on("end.remove",Bl(this._id))}function Ol(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Un(e));for(var o=this._groups,r=o.length,i=new Array(r),s=0; s<r; ++s)for(var c=o[s],a=c.length,l=i[s]=new Array(a),f,d,u=0; u<a; ++u)(f=c[u])&&(d=e.call(f,f.__data__,u,c))&&("__data__"in f&&(d.__data__=f.__data__),l[u]=d,Ut(l[u],t,n,u,l,he(f,n)));return new ve(i,this._parents,t,n)}function Xl(e){var t=this._name,n=this._id;typeof e!="function"&&(e=_r(e));for(var o=this._groups,r=o.length,i=[],s=[],c=0; c<r; ++c)for(var a=o[c],l=a.length,f,d=0; d<l; ++d)if(f=a[d]){for(var u=e.call(f,f.__data__,d,a),h,g=he(f,n),p=0,b=u.length; p<b; ++p)(h=u[p])&&Ut(h,t,n,p,u,g);i.push(u),s.push(f)}return new ve(i,s,t,n)}var Yl=mt.prototype.constructor;function Wl(){return new Yl(this._groups,this._parents)}function ql(e, t){var n,o,r;return function(){var i=je(this,e),s=(this.style.removeProperty(e),je(this,e));return i===s?null:i===n&&s===o?r:r=t(n=i,o=s)}}function qr(e){return function(){this.style.removeProperty(e)}}function Gl(e, t, n){var o,r=n+"",i;return function(){var s=je(this,e);return s===r?null:s===o?i:i=t(o=s,n)}}function Ul(e, t, n){var o,r,i;return function(){var s=je(this,e),c=n(this),a=c+"";return c==null&&(a=c=(this.style.removeProperty(e),je(this,e))),s===a?null:s===o&&a===r?i:(r=a,i=t(o=s,c))}}function Kl(e, t){var n,o,r,i="style."+t,s="end."+i,c;return function(){var a=me(this,e),l=a.on,f=a.value[i]==null?c||(c=qr(t)):void 0;(l!==n||r!==f)&&(o=(n=l).copy()).on(s,r=f),a.on=o}}function Zl(e, t, n){var o=(e+="")=="transform"?Zu:Wr;return t==null?this.styleTween(e,ql(e,o)).on("end.style."+e,qr(e)):typeof t=="function"?this.styleTween(e,Ul(e,o,eo(this,"style."+e,t))).each(Kl(this._id,e)):this.styleTween(e,Gl(e,o,t),n).on("end.style."+e,null)}function Ql(e, t, n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Jl(e, t, n){var o,r;function i(){var s=t.apply(this,arguments);return s!==r&&(o=(r=s)&&Ql(e,s,n)),o}return i._value=t,i}function ed(e, t, n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Jl(e,t,n??""))}function td(e){return function(){this.textContent=e}}function nd(e){return function(){var t=e(this);this.textContent=t??""}}function od(e){return this.tween("text",typeof e=="function"?nd(eo(this,"text",e)):td(e==null?"":e+""))}function rd(e){return function(t){this.textContent=e.call(this,t)}}function id(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&rd(r)),t}return o._value=e,o}function sd(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,id(e))}function cd(){for(var e=this._name,t=this._id,n=Gr(),o=this._groups,r=o.length,i=0; i<r; ++i)for(var s=o[i],c=s.length,a,l=0; l<c; ++l)if(a=s[l]){var f=he(a,t);Ut(a,e,n,l,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new ve(o,this._parents,e,n)}function ad(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i, s){var c={value:s},a={value:function(){--r===0&&i()}};n.each(function(){var l=me(this,o),f=l.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(c),t._.interrupt.push(c),t._.end.push(a)),l.on=t}),r===0&&i()})}var ud=0;function ve(e, t, n, o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Gr(){return++ud}var ye=mt.prototype;ve.prototype={constructor:ve,select:Ol,selectAll:Xl,selectChild:ye.selectChild,selectChildren:ye.selectChildren,filter:zl,merge:Rl,selection:Wl,transition:cd,call:ye.call,nodes:ye.nodes,node:ye.node,size:ye.size,empty:ye.empty,each:ye.each,on:Vl,attr:vl,attrTween:Nl,style:Zl,styleTween:ed,text:od,textTween:sd,remove:Fl,tween:hl,delay:kl,duration:Al,ease:Pl,easeVarying:Hl,end:ad,[Symbol.iterator]:ye[Symbol.iterator]};function ld(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var dd={time:null,delay:0,duration:250,ease:ld};function fd(e, t){for(var n; !(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function hd(e){var t,n;e instanceof ve?(t=e._id,e=e._name):(t=Gr(),(n=dd).time=Qn(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0; i<r; ++i)for(var s=o[i],c=s.length,a,l=0; l<c; ++l)(a=s[l])&&Ut(a,e,t,l,s,n||fd(a,t));return new ve(o,this._parents,e,t)}mt.prototype.interrupt=ll;mt.prototype.transition=hd;const Ct= e=>()=>e;function gd(e, {sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function xe(e, t, n){this.k=e,this.x=t,this.y=n}xe.prototype={constructor:xe,scale:function(e){return e===1?this:new xe(this.k*e,this.x,this.y)},translate:function(e, t){return e===0&t===0?this:new xe(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Kt=new xe(1,0,0);Ur.prototype=xe.prototype;function Ur(e){for(; !e.__zoom;)if(!(e=e.parentNode))return Kt;return e.__zoom}function xn(e){e.stopImmediatePropagation()}function et(e){e.preventDefault(),e.stopImmediatePropagation()}function pd(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function md(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Po(){return this.__zoom||Kt}function yd(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function xd(){return navigator.maxTouchPoints||"ontouchstart"in this}function wd(e, t, n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function Kr(){var e=pd,t=md,n=wd,o=yd,r=xd,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],c=250,a=nl,l=Wt("start","zoom","end"),f,d,u,h=500,g=150,p=0,b=10;function x(m){m.property("__zoom",Po).on("wheel.zoom",H,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",A).filter(r).on("touchstart.zoom",L).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(m, M, v, I){var C=m.selection?m.selection():m;C.property("__zoom",Po),m!==C?S(m,M,v,I):C.interrupt().each(function(){P(this,arguments).event(I).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},x.scaleBy=function(m, M, v, I){x.scaleTo(m,function(){var C=this.__zoom.k,k=typeof M=="function"?M.apply(this,arguments):M;return C*k},v,I)},x.scaleTo=function(m, M, v, I){x.transform(m,function(){var C=t.apply(this,arguments),k=this.__zoom,D=v==null?y(C):typeof v=="function"?v.apply(this,arguments):v,j=k.invert(D),V=typeof M=="function"?M.apply(this,arguments):M;return n(w(E(k,V),D,j),C,s)},v,I)},x.translateBy=function(m, M, v, I){x.transform(m,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof v=="function"?v.apply(this,arguments):v),t.apply(this,arguments),s)},null,I)},x.translateTo=function(m, M, v, I, C){x.transform(m,function(){var k=t.apply(this,arguments),D=this.__zoom,j=I==null?y(k):typeof I=="function"?I.apply(this,arguments):I;return n(Kt.translate(j[0],j[1]).scale(D.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof v=="function"?-v.apply(this,arguments):-v),k,s)},I,C)};function E(m, M){return M=Math.max(i[0],Math.min(i[1],M)),M===m.k?m:new xe(M,m.x,m.y)}function w(m, M, v){var I=M[0]-v[0]*m.k,C=M[1]-v[1]*m.k;return I===m.x&&C===m.y?m:new xe(m.k,I,C)}function y(m){return[(+m[0][0]+ +m[1][0])/2,(+m[0][1]+ +m[1][1])/2]}function S(m, M, v, I){m.on("start.zoom",function(){P(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){P(this,arguments).event(I).end()}).tween("zoom",function(){var C=this,k=arguments,D=P(C,k).event(I),j=t.apply(C,k),V=v==null?y(j):typeof v=="function"?v.apply(C,k):v,Y=Math.max(j[1][0]-j[0][0],j[1][1]-j[0][1]),F=C.__zoom,X=typeof M=="function"?M.apply(C,k):M,W=a(F.invert(V).concat(Y/F.k),X.invert(V).concat(Y/X.k));return function(G){if(G===1)G=X;else{var B=W(G),U=Y/B[2];G=new xe(U,V[0]-B[0]*U,V[1]-B[1]*U)}D.zoom(null,G)}})}function P(m, M, v){return!v&&m.__zooming||new N(m,M)}function N(m, M){this.that=m,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(m,M),this.taps=0}N.prototype={event:function(m){return m&&(this.sourceEvent=m),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(m, M){return this.mouse&&m!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&m!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&m!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(m){var M=ce(this.that).datum();l.call(m,this.that,new gd(m,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:l}),M)}};function H(m, ...M){if(!e.apply(this,arguments))return;var v=P(this,M).event(m),I=this.__zoom,C=Math.max(i[0],Math.min(i[1],I.k*Math.pow(2,o.apply(this,arguments)))),k=le(m);if(v.wheel)(v.mouse[0][0]!==k[0]||v.mouse[0][1]!==k[1])&&(v.mouse[1]=I.invert(v.mouse[0]=k)),clearTimeout(v.wheel);else{if(I.k===C)return;v.mouse=[k,I.invert(k)],Dt(this),v.start()}et(m),v.wheel=setTimeout(D,g),v.zoom("mouse",n(w(E(I,C),v.mouse[0],v.mouse[1]),v.extent,s));function D(){v.wheel=null,v.end()}}function T(m, ...M){if(u||!e.apply(this,arguments))return;var v=m.currentTarget,I=P(this,M,!0).event(m),C=ce(m.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",Y,!0),k=le(m,v),D=m.clientX,j=m.clientY;Pr(m.view),xn(m),I.mouse=[k,this.__zoom.invert(k)],Dt(this),I.start();function V(F){if(et(F),!I.moved){var X=F.clientX-D,W=F.clientY-j;I.moved=X*X+W*W>p}I.event(F).zoom("mouse",n(w(I.that.__zoom,I.mouse[0]=le(F,v),I.mouse[1]),I.extent,s))}function Y(F){C.on("mousemove.zoom mouseup.zoom",null),Dr(F.view,I.moved),et(F),I.event(F).end()}}function A(m, ...M){if(e.apply(this,arguments)){var v=this.__zoom,I=le(m.changedTouches?m.changedTouches[0]:m,this),C=v.invert(I),k=v.k*(m.shiftKey?.5:2),D=n(w(E(v,k),I,C),t.apply(this,M),s);et(m),c>0?ce(this).transition().duration(c).call(S,D,I,m):ce(this).call(x.transform,D,I,m)}}function L(m, ...M){if(e.apply(this,arguments)){var v=m.touches,I=v.length,C=P(this,M,m.changedTouches.length===I).event(m),k,D,j,V;for(xn(m),D=0; D<I; ++D)j=v[D],V=le(j,this),V=[V,this.__zoom.invert(V),j.identifier],C.touch0?!C.touch1&&C.touch0[2]!==V[2]&&(C.touch1=V,C.taps=0):(C.touch0=V,k=!0,C.taps=1+!!f);f&&(f=clearTimeout(f)),k&&(C.taps<2&&(d=V[0],f=setTimeout(function(){f=null},h)),Dt(this),C.start())}}function R(m, ...M){if(this.__zooming){var v=P(this,M).event(m),I=m.changedTouches,C=I.length,k,D,j,V;for(et(m),k=0; k<C; ++k)D=I[k],j=le(D,this),v.touch0&&v.touch0[2]===D.identifier?v.touch0[0]=j:v.touch1&&v.touch1[2]===D.identifier&&(v.touch1[0]=j);if(D=v.that.__zoom,v.touch1){var Y=v.touch0[0],F=v.touch0[1],X=v.touch1[0],W=v.touch1[1],G=(G=X[0]-Y[0])*G+(G=X[1]-Y[1])*G,B=(B=W[0]-F[0])*B+(B=W[1]-F[1])*B;D=E(D,Math.sqrt(G/B)),j=[(Y[0]+X[0])/2,(Y[1]+X[1])/2],V=[(F[0]+W[0])/2,(F[1]+W[1])/2]}else if(v.touch0)j=v.touch0[0],V=v.touch0[1];else return;v.zoom("touch",n(w(D,j,V),v.extent,s))}}function z(m, ...M){if(this.__zooming){var v=P(this,M).event(m),I=m.changedTouches,C=I.length,k,D;for(xn(m),u&&clearTimeout(u),u=setTimeout(function(){u=null},h),k=0; k<C; ++k)D=I[k],v.touch0&&v.touch0[2]===D.identifier?delete v.touch0:v.touch1&&v.touch1[2]===D.identifier&&delete v.touch1;if(v.touch1&&!v.touch0&&(v.touch0=v.touch1,delete v.touch1),v.touch0)v.touch0[1]=this.__zoom.invert(v.touch0[0]);else if(v.end(),v.taps===2&&(D=le(D,this),Math.hypot(d[0]-D[0],d[1]-D[1])<b)){var j=ce(this).on("dblclick.zoom");j&&j.apply(this,arguments)}}}return x.wheelDelta=function(m){return arguments.length?(o=typeof m=="function"?m:Ct(+m),x):o},x.filter=function(m){return arguments.length?(e=typeof m=="function"?m:Ct(!!m),x):e},x.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:Ct(!!m),x):r},x.extent=function(m){return arguments.length?(t=typeof m=="function"?m:Ct([[+m[0][0],+m[0][1]],[+m[1][0],+m[1][1]]]),x):t},x.scaleExtent=function(m){return arguments.length?(i[0]=+m[0],i[1]=+m[1],x):[i[0],i[1]]},x.translateExtent=function(m){return arguments.length?(s[0][0]=+m[0][0],s[1][0]=+m[1][0],s[0][1]=+m[0][1],s[1][1]=+m[1][1],x):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},x.constrain=function(m){return arguments.length?(n=m,x):n},x.duration=function(m){return arguments.length?(c=+m,x):c},x.interpolate=function(m){return arguments.length?(a=m,x):a},x.on=function(){var m=l.on.apply(l,arguments);return m===l?x:m},x.clickDistance=function(m){return arguments.length?(p=(m=+m)*m,x):Math.sqrt(p)},x.tapDistance=function(m){return arguments.length?(b=+m,x):b},x}const be={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003: e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007: e=>`The old edge with id=${e} does not exist.`,error009: e=>`Marker type "${e}" doesn't exist.`,error008:(e, {id:t,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:o}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011: e=>`Edge type "${e}" not found. Using fallback type "default".`,error012: e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID."},lt=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Zr=["Enter"," ","Escape"];var Be;(function(e){e.Strict="strict",e.Loose="loose"})(Be||(Be={}));var Ae;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ae||(Ae={}));var dt;(function(e){e.Partial="partial",e.Full="full"})(dt||(dt={}));const Qr={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Ce;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ce||(Ce={}));var Ft;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Ft||(Ft={}));var O;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(O||(O={}));const Do={[O.Left]:O.Right,[O.Right]:O.Left,[O.Top]:O.Bottom,[O.Bottom]:O.Top};function Jr(e){return e===null?null:e?"valid":"invalid"}const ei= e=>"id"in e&&"source"in e&&"target"in e,vd= e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),to= e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),xt=(e, t=[0,0])=>{const{width:n,height:o}=_e(e),r=e.origin??t,i=n*r[0],s=o*r[1];return{x:e.position.x-i,y:e.position.y-s}},bd=(e, t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((o, r)=>{const i=typeof r=="string";let s=!t.nodeLookup&&!i?r:void 0;t.nodeLookup&&(s=i?t.nodeLookup.get(r):to(r)?r:t.nodeLookup.get(r.id));const c=s?Ot(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Zt(o,c)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Qt(n)},wt=(e, t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(o=>{if(t.filter===void 0||t.filter(o)){const r=Ot(o);n=Zt(n,r)}}),Qt(n)},ti=(e, t, [n,o,r]=[0,0,1], i=!1, s=!1)=>{const c={...vt(t,[n,o,r]),width:t.width/r,height:t.height/r},a=[];for(const l of e.values()){const{measured:f,selectable:d=!0,hidden:u=!1}=l;if(s&&!d||u)continue;const h=f.width??l.width??l.initialWidth??null,g=f.height??l.height??l.initialHeight??null,p=ft(c,Oe(l)),b=(h??0)*(g??0),x=i&&p>0;(!l.internals.handleBounds||x||p>=b||l.dragging)&&a.push(l)}return a},_d=(e, t)=>{const n=new Set;return e.forEach(o=>{n.add(o.id)}),t.filter(o=>n.has(o.source)||n.has(o.target))};function Pn(e, t){const n=new Map,o=t!=null&&t.nodes?new Set(t.nodes.map(r=>r.id)):null;return e.forEach(r=>{r.measured.width&&r.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!r.hidden)&&(!o||o.has(r.id))&&n.set(r.id,r)}),n}async function Dn({nodes:e,width:t,height:n,panZoom:o,minZoom:r,maxZoom:i}, s){if(e.size===0)return Promise.resolve(!1);const c=wt(e),a=no(c,t,n,(s==null?void 0:s.minZoom)??r,(s==null?void 0:s.maxZoom)??i,(s==null?void 0:s.padding)??.1);return await o.setViewport(a,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function ni({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:r,onError:i}){const s=n.get(e),c=s.parentId?n.get(s.parentId):void 0,{x:a,y:l}=c?c.internals.positionAbsolute:{x:0,y:0},f=s.origin??o;let d=r;if(s.extent==="parent"&&!s.expandParent)if(!c)i==null||i("005",be.error005());else{const h=c.measured.width,g=c.measured.height;h&&g&&(d=[[a,l],[a+h,l+g]])}else c&&Xe(s.extent)&&(d=[[s.extent[0][0]+a,s.extent[0][1]+l],[s.extent[1][0]+a,s.extent[1][1]+l]]);const u=Xe(d)?Pe(t,d,s.measured):t;return{position:{x:u.x-a+s.measured.width*f[0],y:u.y-l+s.measured.height*f[1]},positionAbsolute:u}}async function Ed({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:o,onBeforeDelete:r}){const i=new Set(e.map(u=>u.id)),s=[];for(const u of n){if(u.deletable===!1)continue;const h=i.has(u.id),g=!h&&u.parentId&&s.find(p=>p.id===u.parentId);(h||g)&&s.push(u)}const c=new Set(t.map(u=>u.id)),a=o.filter(u=>u.deletable!==!1),f=_d(s,a);for(const u of a)c.has(u.id)&&!f.find(g=>g.id===u.id)&&f.push(u);if(!r)return{edges:f,nodes:s};const d=await r({nodes:s,edges:f});return typeof d=="boolean"?d?{edges:f,nodes:s}:{edges:[],nodes:[]}:d}const Fe=(e, t=0, n=1)=>Math.min(Math.max(e,t),n),Pe=(e={x:0,y:0}, t, n)=>({x:Fe(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Fe(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function oi(e, t, n){const{width:o,height:r}=_e(n),{x:i,y:s}=n.internals.positionAbsolute;return Pe(e,[[i,s],[i+o,s+r]],t)}const Ho=(e, t, n)=>e<t?Fe(Math.abs(e-t),1,t)/t:e>n?-Fe(Math.abs(e-n),1,t)/t:0,ri=(e, t, n=15, o=40)=>{const r=Ho(e.x,o,t.width-o)*n,i=Ho(e.y,o,t.height-o)*n;return[r,i]},Zt=(e, t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Hn=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),Qt=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Oe=(e, t=[0,0])=>{var r,i;const{x:n,y:o}=to(e)?e.internals.positionAbsolute:xt(e,t);return{x:n,y:o,width:((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0,height:((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0}},Ot=(e, t=[0,0])=>{var r,i;const{x:n,y:o}=to(e)?e.internals.positionAbsolute:xt(e,t);return{x:n,y:o,x2:n+(((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0),y2:o+(((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0)}},ii=(e, t)=>Qt(Zt(Hn(e),Hn(t))),ft=(e, t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},zo= e=>fe(e.width)&&fe(e.height)&&fe(e.x)&&fe(e.y),fe= e=>!isNaN(e)&&isFinite(e),Sd=(e, t)=>{},Jt=(e, t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),vt=({x:e,y:t}, [n,o,r], i=!1, s=[1,1])=>{const c={x:(e-n)/r,y:(t-o)/r};return i?Jt(c,s):c},si=({x:e,y:t}, [n,o,r])=>({x:e*r+n,y:t*r+o}),no=(e, t, n, o, r, i)=>{const s=t/(e.width*(1+i)),c=n/(e.height*(1+i)),a=Math.min(s,c),l=Fe(a,o,r),f=e.x+e.width/2,d=e.y+e.height/2,u=t/2-f*l,h=n/2-d*l;return{x:u,y:h,zoom:l}},Xt=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Xe(e){return e!==void 0&&e!=="parent"}function _e(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function ci(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function ai(e, t={width:0,height:0}, n, o, r){const i={...e},s=o.get(n);if(s){const c=s.origin||r;i.x+=s.internals.positionAbsolute.x-(t.width??0)*c[0],i.y+=s.internals.positionAbsolute.y-(t.height??0)*c[1]}return i}function Ro(e, t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function ot(e, {snapGrid:t=[0,0],snapToGrid:n=!1,transform:o,containerBounds:r}){const{x:i,y:s}=we(e),c=vt({x:i-((r==null?void 0:r.left)??0),y:s-((r==null?void 0:r.top)??0)},o),{x:a,y:l}=n?Jt(c,t):c;return{xSnapped:a,ySnapped:l,...c}}const en= e=>({width:e.offsetWidth,height:e.offsetHeight}),ui= e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Nd=["INPUT","SELECT","TEXTAREA"];function zn(e){var o,r;const t=((r=(o=e.composedPath)==null?void 0:o.call(e))==null?void 0:r[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:Nd.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const li= e=>"clientX"in e,we=(e, t)=>{var i,s;const n=li(e),o=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,r=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:o-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},Lo=(e, t, n, o, r)=>{const i=t.querySelectorAll(`.${e}`);return!i||!i.length?null:Array.from(i).map(s=>{const c=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:r,position:s.getAttribute("data-handlepos"),x:(c.left-n.left)/o,y:(c.top-n.top)/o,...en(s)}})};function di({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:s,targetControlY:c}){const a=e*.125+r*.375+s*.375+n*.125,l=t*.125+i*.375+c*.375+o*.125,f=Math.abs(a-e),d=Math.abs(l-t);return[a,l,f,d]}function Mt(e, t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function jo({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){switch(e){case O.Left:return[t-Mt(t-o,i),n];case O.Right:return[t+Mt(o-t,i),n];case O.Top:return[t,n-Mt(n-r,i)];case O.Bottom:return[t,n+Mt(r-n,i)]}}function fi({sourceX:e,sourceY:t,sourcePosition:n=O.Bottom,targetX:o,targetY:r,targetPosition:i=O.Top,curvature:s=.25}){const[c,a]=jo({pos:n,x1:e,y1:t,x2:o,y2:r,c:s}),[l,f]=jo({pos:i,x1:o,y1:r,x2:e,y2:t,c:s}),[d,u,h,g]=di({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:c,sourceControlY:a,targetControlX:l,targetControlY:f});return[`M${e},${t} C${c},${a} ${l},${f} ${o},${r}`,d,u,h,g]}function hi({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,s=Math.abs(o-t)/2,c=o<t?o+s:o-s;return[i,c,r,s]}function Cd({sourceNode:e,targetNode:t,selected:n=!1,zIndex:o=0,elevateOnSelect:r=!1}){if(!r)return o;const i=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return o+(i?s:0)}function Md({sourceNode:e,targetNode:t,width:n,height:o,transform:r}){const i=Zt(Ot(e),Ot(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const s={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:o/r[2]};return ft(s,Qt(i))>0}const kd=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`xy-edge__${e}${t||""}-${n}${o||""}`,Id=(e, t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),gi=(e, t)=>{if(!e.source||!e.target)return t;let n;return ei(e)?n={...e}:n={...e,id:kd(e)},Id(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function pi({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,i,s,c]=hi({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,i,s,c]}const Vo={[O.Left]:{x:-1,y:0},[O.Right]:{x:1,y:0},[O.Top]:{x:0,y:-1},[O.Bottom]:{x:0,y:1}},$d=({source:e,sourcePosition:t=O.Bottom,target:n})=>t===O.Left||t===O.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Bo=(e, t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Ad({source:e,sourcePosition:t=O.Bottom,target:n,targetPosition:o=O.Top,center:r,offset:i}){const s=Vo[t],c=Vo[o],a={x:e.x+s.x*i,y:e.y+s.y*i},l={x:n.x+c.x*i,y:n.y+c.y*i},f=$d({source:a,sourcePosition:t,target:l}),d=f.x!==0?"x":"y",u=f[d];let h=[],g,p;const b={x:0,y:0},x={x:0,y:0},[E,w,y,S]=hi({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[d]*c[d]===-1){g=r.x??E,p=r.y??w;const N=[{x:g,y:a.y},{x:g,y:l.y}],H=[{x:a.x,y:p},{x:l.x,y:p}];s[d]===u?h=d==="x"?N:H:h=d==="x"?H:N}else{const N=[{x:a.x,y:l.y}],H=[{x:l.x,y:a.y}];if(d==="x"?h=s.x===u?H:N:h=s.y===u?N:H,t===o){const z=Math.abs(e[d]-n[d]);if(z<=i){const m=Math.min(i-1,i-z);s[d]===u?b[d]=(a[d]>e[d]?-1:1)*m:x[d]=(l[d]>n[d]?-1:1)*m}}if(t!==o){const z=d==="x"?"y":"x",m=s[d]===c[z],M=a[z]>l[z],v=a[z]<l[z];(s[d]===1&&(!m&&M||m&&v)||s[d]!==1&&(!m&&v||m&&M))&&(h=d==="x"?N:H)}const T={x:a.x+b.x,y:a.y+b.y},A={x:l.x+x.x,y:l.y+x.y},L=Math.max(Math.abs(T.x-h[0].x),Math.abs(A.x-h[0].x)),R=Math.max(Math.abs(T.y-h[0].y),Math.abs(A.y-h[0].y));L>=R?(g=(T.x+A.x)/2,p=h[0].y):(g=h[0].x,p=(T.y+A.y)/2)}return[[e,{x:a.x+b.x,y:a.y+b.y},...h,{x:l.x+x.x,y:l.y+x.y},n],g,p,y,S]}function Td(e, t, n, o){const r=Math.min(Bo(e,t)/2,Bo(t,n)/2,o),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const l=e.x<n.x?-1:1,f=e.y<n.y?1:-1;return`L ${i+r*l},${s}Q ${i},${s} ${i},${s+r*f}`}const c=e.x<n.x?1:-1,a=e.y<n.y?-1:1;return`L ${i},${s+r*a}Q ${i},${s} ${i+r*c},${s}`}function Rn({sourceX:e,sourceY:t,sourcePosition:n=O.Bottom,targetX:o,targetY:r,targetPosition:i=O.Top,borderRadius:s=5,centerX:c,centerY:a,offset:l=20}){const[f,d,u,h,g]=Ad({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:i,center:{x:c,y:a},offset:l});return[f.reduce((b, x, E)=>{let w="";return E>0&&E<f.length-1?w=Td(f[E-1],x,f[E+1],s):w=`${E===0?"M":"L"}${x.x} ${x.y}`,b+=w,b},""),d,u,h,g]}function Fo(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Pd(e){var d;const{sourceNode:t,targetNode:n}=e;if(!Fo(t)||!Fo(n))return null;const o=t.internals.handleBounds||Oo(t.handles),r=n.internals.handleBounds||Oo(n.handles),i=Xo((o==null?void 0:o.source)??[],e.sourceHandle),s=Xo(e.connectionMode===Be.Strict?(r==null?void 0:r.target)??[]:((r==null?void 0:r.target)??[]).concat((r==null?void 0:r.source)??[]),e.targetHandle);if(!i||!s)return(d=e.onError)==null||d.call(e,"008",be.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const c=(i==null?void 0:i.position)||O.Bottom,a=(s==null?void 0:s.position)||O.Top,l=ht(t,i,c),f=ht(n,s,a);return{sourceX:l.x,sourceY:l.y,targetX:f.x,targetY:f.y,sourcePosition:c,targetPosition:a}}function Oo(e){if(!e)return null;const t=[],n=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,o.type==="source"?t.push(o):o.type==="target"&&n.push(o);return{source:t,target:n}}function ht(e, t, n=O.Left, o=!1){const r=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,i=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:c}=t??_e(e);if(o)return{x:r+s/2,y:i+c/2};switch((t==null?void 0:t.position)??n){case O.Top:return{x:r+s/2,y:i};case O.Right:return{x:r+s,y:i+c/2};case O.Bottom:return{x:r+s/2,y:i+c};case O.Left:return{x:r,y:i+c/2}}}function Xo(e, t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Ln(e, t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`:""}function Dd(e, {id:t,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:r}){const i=new Set;return e.reduce((s, c)=>([c.markerStart||o,c.markerEnd||r].forEach(a=>{if(a&&typeof a=="object"){const l=Ln(a,t);i.has(l)||(s.push({id:l,color:a.color||n,...a}),i.add(l))}}),s),[]).sort((s, c)=>s.id.localeCompare(c.id))}const oo={nodeOrigin:[0,0],nodeExtent:lt,elevateNodesOnSelect:!0,defaults:{}},Hd={...oo,checkEquality:!0};function ro(e, t){const n={...e};for(const o in t)t[o]!==void 0&&(n[o]=t[o]);return n}function zd(e, t, n){const o=ro(oo,n);for(const r of e.values())if(r.parentId)io(r,e,t,o);else{const i=xt(r,o.nodeOrigin),s=Xe(r.extent)?r.extent:o.nodeExtent,c=Pe(i,s,_e(r));r.internals.positionAbsolute=c}}function jn(e, t, n, o){var c,a;const r=ro(Hd,o),i=new Map(t),s=r!=null&&r.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const l of e){let f=i.get(l.id);if(r.checkEquality&&l===(f==null?void 0:f.internals.userNode))t.set(l.id,f);else{const d=xt(l,r.nodeOrigin),u=Xe(l.extent)?l.extent:r.nodeExtent,h=Pe(d,u,_e(l));f={...r.defaults,...l,measured:{width:(c=l.measured)==null?void 0:c.width,height:(a=l.measured)==null?void 0:a.height},internals:{positionAbsolute:h,handleBounds:l.measured?f==null?void 0:f.internals.handleBounds:void 0,z:mi(l,s),userNode:l}},t.set(l.id,f)}l.parentId&&io(f,t,n,o)}}function Rd(e, t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function io(e, t, n, o){const{elevateNodesOnSelect:r,nodeOrigin:i,nodeExtent:s}=ro(oo,o),c=e.parentId,a=t.get(c);if(!a){console.warn(`Parent node ${c} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Rd(e,n);const l=r?1e3:0,{x:f,y:d,z:u}=Ld(e,a,i,s,l),{positionAbsolute:h}=e.internals,g=f!==h.x||d!==h.y;(g||u!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:g?{x:f,y:d}:h,z:u}})}function mi(e, t){return(fe(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Ld(e, t, n, o, r){const{x:i,y:s}=t.internals.positionAbsolute,c=_e(e),a=xt(e,n),l=Xe(e.extent)?Pe(a,e.extent,c):a;let f=Pe({x:i+l.x,y:s+l.y},o,c);e.extent==="parent"&&(f=oi(f,c,t));const d=mi(e,r),u=t.internals.z??0;return{x:f.x,y:f.y,z:u>d?u:d}}function so(e, t, n, o=[0,0]){var s;const r=[],i=new Map;for(const c of e){const a=t.get(c.parentId);if(!a)continue;const l=((s=i.get(c.parentId))==null?void 0:s.expandedRect)??Oe(a),f=ii(l,c.rect);i.set(c.parentId,{expandedRect:f,parent:a})}return i.size>0&&i.forEach(({expandedRect:c,parent:a}, l)=>{var w;const f=a.internals.positionAbsolute,d=_e(a),u=a.origin??o,h=c.x<f.x?Math.round(Math.abs(f.x-c.x)):0,g=c.y<f.y?Math.round(Math.abs(f.y-c.y)):0,p=Math.max(d.width,Math.round(c.width)),b=Math.max(d.height,Math.round(c.height)),x=(p-d.width)*u[0],E=(b-d.height)*u[1];(h>0||g>0||x||E)&&(r.push({id:l,type:"position",position:{x:a.position.x-h+x,y:a.position.y-g+E}}),(w=n.get(l))==null||w.forEach(y=>{e.some(S=>S.id===y.id)||r.push({id:y.id,type:"position",position:{x:y.position.x+h,y:y.position.y+g}})})),(d.width<c.width||d.height<c.height||h||g)&&r.push({id:l,type:"dimensions",setAttributes:!0,dimensions:{width:p+(h?u[0]*h-x:0),height:b+(g?u[1]*g-E:0)}})}),r}function jd(e, t, n, o, r, i){const s=o==null?void 0:o.querySelector(".xyflow__viewport");let c=!1;if(!s)return{changes:[],updatedInternals:c};const a=[],l=window.getComputedStyle(s),{m22:f}=new window.DOMMatrixReadOnly(l.transform),d=[];for(const u of e.values()){const h=t.get(u.id);if(!h)continue;if(h.hidden){t.set(h.id,{...h,internals:{...h.internals,handleBounds:void 0}}),c=!0;continue}const g=en(u.nodeElement),p=h.measured.width!==g.width||h.measured.height!==g.height;if(!!(g.width&&g.height&&(p||!h.internals.handleBounds||u.force))){const x=u.nodeElement.getBoundingClientRect(),E=Xe(h.extent)?h.extent:i;let{positionAbsolute:w}=h.internals;h.parentId&&h.extent==="parent"?w=oi(w,g,t.get(h.parentId)):E&&(w=Pe(w,E,g));const y={...h,measured:g,internals:{...h.internals,positionAbsolute:w,handleBounds:{source:Lo("source",u.nodeElement,x,f,h.id),target:Lo("target",u.nodeElement,x,f,h.id)}}};t.set(h.id,y),h.parentId&&io(y,t,n,{nodeOrigin:r}),c=!0,p&&(a.push({id:h.id,type:"dimensions",dimensions:g}),h.expandParent&&h.parentId&&d.push({id:h.id,parentId:h.parentId,rect:Oe(y,r)}))}}if(d.length>0){const u=so(d,t,n,r);a.push(...u)}return{changes:a,updatedInternals:c}}async function Vd({delta:e,panZoom:t,transform:n,translateExtent:o,width:r,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,i]],o),c=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(c)}function Yo(e, t, n, o, r, i){let s=r;const c=o.get(s)||new Map;o.set(s,c.set(n,t)),s=`${r}-${e}`;const a=o.get(s)||new Map;if(o.set(s,a.set(n,t)),i){s=`${r}-${e}-${i}`;const l=o.get(s)||new Map;o.set(s,l.set(n,t))}}function yi(e, t, n){e.clear(),t.clear();for(const o of n){const{source:r,target:i,sourceHandle:s=null,targetHandle:c=null}=o,a={edgeId:o.id,source:r,target:i,sourceHandle:s,targetHandle:c},l=`${r}-${s}--${i}-${c}`,f=`${i}-${c}--${r}-${s}`;Yo("source",a,f,e,r,s),Yo("target",a,l,e,i,c),t.set(o.id,o)}}function xi(e, t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:xi(n,t):!1}function Wo(e, t, n){var r;let o=e;do{if((r=o==null?void 0:o.matches)!=null&&r.call(o,t))return!0;if(o===n)return!1;o=o==null?void 0:o.parentElement}while(o);return!1}function Bd(e, t, n, o){const r=new Map;for(const[i,s]of e)if((s.selected||s.id===o)&&(!s.parentId||!xi(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const c=e.get(i);c&&r.set(i,{id:i,position:c.position||{x:0,y:0},distance:{x:n.x-c.internals.positionAbsolute.x,y:n.y-c.internals.positionAbsolute.y},extent:c.extent,parentId:c.parentId,origin:c.origin,expandParent:c.expandParent,internals:{positionAbsolute:c.internals.positionAbsolute||{x:0,y:0}},measured:{width:c.measured.width??0,height:c.measured.height??0}})}return r}function wn({nodeId:e,dragItems:t,nodeLookup:n,dragging:o=!0}){var s,c,a;const r=[];for(const[l,f]of t){const d=(s=n.get(l))==null?void 0:s.internals.userNode;d&&r.push({...d,position:f.position,dragging:o})}if(!e)return[r[0],r];const i=(c=n.get(e))==null?void 0:c.internals.userNode;return[i?{...i,position:((a=t.get(e))==null?void 0:a.position)||i.position,dragging:o}:r[0],r]}function Fd({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:o,onDragStop:r}){let i={x:null,y:null},s=0,c=new Map,a=!1,l={x:0,y:0},f=null,d=!1,u=null,h=!1;function g({noDragClassName:b,handleSelector:x,domNode:E,isSelectable:w,nodeId:y,nodeClickDistance:S=0}){u=ce(E);function P({x:A,y:L}, R){const{nodeLookup:z,nodeExtent:m,snapGrid:M,snapToGrid:v,nodeOrigin:I,onNodeDrag:C,onSelectionDrag:k,onError:D,updateNodePositions:j}=t();i={x:A,y:L};let V=!1,Y={x:0,y:0,x2:0,y2:0};if(c.size>1&&m){const F=wt(c);Y=Hn(F)}for(const[F,X]of c){if(!z.has(F))continue;let W={x:A-X.distance.x,y:L-X.distance.y};v&&(W=Jt(W,M));let G=[[m[0][0],m[0][1]],[m[1][0],m[1][1]]];if(c.size>1&&m&&!X.extent){const{positionAbsolute:Z}=X.internals,K=Z.x-Y.x+m[0][0],q=Z.x+X.measured.width-Y.x2+m[1][0],J=Z.y-Y.y+m[0][1],ee=Z.y+X.measured.height-Y.y2+m[1][1];G=[[K,J],[q,ee]]}const{position:B,positionAbsolute:U}=ni({nodeId:F,nextPosition:W,nodeLookup:z,nodeExtent:G,nodeOrigin:I,onError:D});V=V||X.position.x!==B.x||X.position.y!==B.y,X.position=B,X.internals.positionAbsolute=U}if(V&&(j(c,!0),R&&(o||C||!y&&k))){const[F,X]=wn({nodeId:y,dragItems:c,nodeLookup:z});o==null||o(R,c,F,X),C==null||C(R,F,X),y||k==null||k(R,X)}}async function N(){if(!f)return;const{transform:A,panBy:L,autoPanSpeed:R}=t(),[z,m]=ri(l,f,R);(z!==0||m!==0)&&(i.x=(i.x??0)-z/A[2],i.y=(i.y??0)-m/A[2],await L({x:z,y:m})&&P(i,null)),s=requestAnimationFrame(N)}function H(A){var V;const{nodeLookup:L,multiSelectionActive:R,nodesDraggable:z,transform:m,snapGrid:M,snapToGrid:v,selectNodesOnDrag:I,onNodeDragStart:C,onSelectionDragStart:k,unselectNodesAndEdges:D}=t();d=!0,(!I||!w)&&!R&&y&&((V=L.get(y))!=null&&V.selected||D()),w&&I&&y&&(e==null||e(y));const j=ot(A.sourceEvent,{transform:m,snapGrid:M,snapToGrid:v,containerBounds:f});if(i=j,c=Bd(L,z,j,y),c.size>0&&(n||C||!y&&k)){const[Y,F]=wn({nodeId:y,dragItems:c,nodeLookup:L});n==null||n(A.sourceEvent,c,Y,F),C==null||C(A.sourceEvent,Y,F),y||k==null||k(A.sourceEvent,F)}}const T=Hr().clickDistance(S).on("start", A=>{const{domNode:L,nodeDragThreshold:R,transform:z,snapGrid:m,snapToGrid:M}=t();f=(L==null?void 0:L.getBoundingClientRect())||null,h=!1,R===0&&H(A),i=ot(A.sourceEvent,{transform:z,snapGrid:m,snapToGrid:M,containerBounds:f}),l=we(A.sourceEvent,f)}).on("drag", A=>{const{autoPanOnNodeDrag:L,transform:R,snapGrid:z,snapToGrid:m,nodeDragThreshold:M,nodeLookup:v}=t(),I=ot(A.sourceEvent,{transform:R,snapGrid:z,snapToGrid:m,containerBounds:f});if((A.sourceEvent.type==="touchmove"&&A.sourceEvent.touches.length>1||y&&!v.has(y))&&(h=!0),!h){if(!a&&L&&d&&(a=!0,N()),!d){const C=I.xSnapped-(i.x??0),k=I.ySnapped-(i.y??0);Math.sqrt(C*C+k*k)>M&&H(A)}(i.x!==I.xSnapped||i.y!==I.ySnapped)&&c&&d&&(l=we(A.sourceEvent,f),P(I,A.sourceEvent))}}).on("end", A=>{if(!(!d||h)&&(a=!1,d=!1,cancelAnimationFrame(s),c.size>0)){const{nodeLookup:L,updateNodePositions:R,onNodeDragStop:z,onSelectionDragStop:m}=t();if(R(c,!1),r||z||!y&&m){const[M,v]=wn({nodeId:y,dragItems:c,nodeLookup:L,dragging:!1});r==null||r(A.sourceEvent,c,M,v),z==null||z(A.sourceEvent,M,v),y||m==null||m(A.sourceEvent,v)}}}).filter(A=>{const L=A.target;return!A.button&&(!b||!Wo(L,`.${b}`,E))&&(!x||Wo(L,x,E))});u.call(T)}function p(){u==null||u.on(".drag",null)}return{update:g,destroy:p}}function Od(e, t, n){const o=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())ft(r,Oe(i))>0&&o.push(i);return o}const Xd=250;function Yd(e, t, n, o){var c,a;let r=[],i=1/0;const s=Od(e,n,t+Xd);for(const l of s){const f=[...((c=l.internals.handleBounds)==null?void 0:c.source)??[],...((a=l.internals.handleBounds)==null?void 0:a.target)??[]];for(const d of f){if(o.nodeId===d.nodeId&&o.type===d.type&&o.id===d.id)continue;const{x:u,y:h}=ht(l,d,d.position,!0),g=Math.sqrt(Math.pow(u-e.x,2)+Math.pow(h-e.y,2));g>t||(g<i?(r=[{...d,x:u,y:h}],i=g):g===i&&r.push({...d,x:u,y:h}))}}if(!r.length)return null;if(r.length>1){const l=o.type==="source"?"target":"source";return r.find(f=>f.type===l)??r[0]}return r[0]}function wi(e, t, n, o, r, i=!1){var l,f,d;const s=o.get(e);if(!s)return null;const c=r==="strict"?(l=s.internals.handleBounds)==null?void 0:l[t]:[...((f=s.internals.handleBounds)==null?void 0:f.source)??[],...((d=s.internals.handleBounds)==null?void 0:d.target)??[]],a=(n?c==null?void 0:c.find(u=>u.id===n):c==null?void 0:c[0])??null;return a&&i?{...a,...ht(s,a,a.position,!0)}:a}function vi(e, t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Wd(e, t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const bi=()=>!0;function qd(e, {connectionMode:t,connectionRadius:n,handleId:o,nodeId:r,edgeUpdaterType:i,isTarget:s,domNode:c,nodeLookup:a,lib:l,autoPanOnConnect:f,flowId:d,panBy:u,cancelConnection:h,onConnectStart:g,onConnect:p,onConnectEnd:b,isValidConnection:x=bi,onReconnectEnd:E,updateConnection:w,getTransform:y,getFromHandle:S,autoPanSpeed:P}){const N=ui(e.target);let H=0,T;const{x:A,y:L}=we(e),R=N==null?void 0:N.elementFromPoint(A,L),z=vi(i,R),m=c==null?void 0:c.getBoundingClientRect();if(!m||!z)return;const M=wi(r,z,o,a,t);if(!M)return;let v=we(e,m),I=!1,C=null,k=!1,D=null;function j(){if(!f||!m)return;const[U,Z]=ri(v,m,P);u({x:U,y:Z}),H=requestAnimationFrame(j)}const V={...M,nodeId:r,type:z,position:M.position},Y=a.get(r),X={inProgress:!0,isValid:null,from:ht(Y,V,O.Left,!0),fromHandle:V,fromPosition:V.position,fromNode:Y,to:v,toHandle:null,toPosition:Do[V.position],toNode:null};w(X);let W=X;g==null||g(e,{nodeId:r,handleId:o,handleType:z});function G(U){if(!S()||!V){B(U);return}const Z=y();v=we(U,m),T=Yd(vt(v,Z,!1,[1,1]),n,a,V),I||(j(),I=!0);const K=_i(U,{handle:T,connectionMode:t,fromNodeId:r,fromHandleId:o,fromType:s?"target":"source",isValidConnection:x,doc:N,lib:l,flowId:d,nodeLookup:a});D=K.handleDomNode,C=K.connection,k=Wd(!!T,K.isValid);const q={...W,isValid:k,to:T&&k?si({x:T.x,y:T.y},Z):v,toHandle:K.toHandle,toPosition:k&&K.toHandle?K.toHandle.position:Do[V.position],toNode:K.toHandle?a.get(K.toHandle.nodeId):null};k&&T&&W.toHandle&&q.toHandle&&W.toHandle.type===q.toHandle.type&&W.toHandle.nodeId===q.toHandle.nodeId&&W.toHandle.id===q.toHandle.id&&W.to.x===q.to.x&&W.to.y===q.to.y||(w(q),W=q)}function B(U){(T||D)&&C&&k&&(p==null||p(C));const{inProgress:Z,...K}=W,q={...K,toPosition:W.toHandle?W.toPosition:null};b==null||b(U,q),i&&(E==null||E(U,q)),h(),cancelAnimationFrame(H),I=!1,k=!1,C=null,D=null,N.removeEventListener("mousemove",G),N.removeEventListener("mouseup",B),N.removeEventListener("touchmove",G),N.removeEventListener("touchend",B)}N.addEventListener("mousemove",G),N.addEventListener("mouseup",B),N.addEventListener("touchmove",G),N.addEventListener("touchend",B)}function _i(e, {handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:i,doc:s,lib:c,flowId:a,isValidConnection:l=bi,nodeLookup:f}){const d=i==="target",u=t?s.querySelector(`.${c}-flow__handle[data-id="${a}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:h,y:g}=we(e),p=s.elementFromPoint(h,g),b=p!=null&&p.classList.contains(`${c}-flow__handle`)?p:u,x={handleDomNode:b,isValid:!1,connection:null,toHandle:null};if(b){const E=vi(void 0,b),w=b.getAttribute("data-nodeid"),y=b.getAttribute("data-handleid"),S=b.classList.contains("connectable"),P=b.classList.contains("connectableend");if(!w||!E)return x;const N={source:d?w:o,sourceHandle:d?y:r,target:d?o:w,targetHandle:d?r:y};x.connection=N;const T=S&&P&&(n===Be.Strict?d&&E==="source"||!d&&E==="target":w!==o||y!==r);x.isValid=T&&l(N),x.toHandle=wi(w,E,y,f,n,!1)}return x}const Vn={onPointerDown:qd,isValid:_i};function Gd({domNode:e,panZoom:t,getTransform:n,getViewScale:o}){const r=ce(e);function i({translateExtent:c,width:a,height:l,zoomStep:f=10,pannable:d=!0,zoomable:u=!0,inversePan:h=!1}){const g= w=>{const y=n();if(w.sourceEvent.type!=="wheel"||!t)return;const S=-w.sourceEvent.deltaY*(w.sourceEvent.deltaMode===1?.05:w.sourceEvent.deltaMode?1:.002)*f,P=y[2]*Math.pow(2,S);t.scaleTo(P)};let p=[0,0];const b= w=>{(w.sourceEvent.type==="mousedown"||w.sourceEvent.type==="touchstart")&&(p=[w.sourceEvent.clientX??w.sourceEvent.touches[0].clientX,w.sourceEvent.clientY??w.sourceEvent.touches[0].clientY])},x= w=>{const y=n();if(w.sourceEvent.type!=="mousemove"&&w.sourceEvent.type!=="touchmove"||!t)return;const S=[w.sourceEvent.clientX??w.sourceEvent.touches[0].clientX,w.sourceEvent.clientY??w.sourceEvent.touches[0].clientY],P=[S[0]-p[0],S[1]-p[1]];p=S;const N=o()*Math.max(y[2],Math.log(y[2]))*(h?-1:1),H={x:y[0]-P[0]*N,y:y[1]-P[1]*N},T=[[0,0],[a,l]];t.setViewportConstrained({x:H.x,y:H.y,zoom:y[2]},T,c)},E=Kr().on("start",b).on("zoom",d?x:null).on("zoom.wheel",u?g:null);r.call(E,{})}function s(){r.on("zoom",null)}return{update:i,destroy:s,pointer:le}}const Ud=(e, t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,tn= e=>({x:e.x,y:e.y,zoom:e.k}),vn=({x:e,y:t,zoom:n})=>Kt.translate(e,t).scale(n),He=(e, t)=>e.target.closest(`.${t}`),Ei=(e, t)=>t===2&&Array.isArray(e)&&e.includes(2),bn=(e, t=0, n=()=>{})=>{const o=typeof t=="number"&&t>0;return o||n(),o?e.transition().duration(t).on("end",n):e},Si= e=>{const t=e.ctrlKey&&Xt()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Kd({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:o,panOnScrollMode:r,panOnScrollSpeed:i,zoomOnPinch:s,onPanZoomStart:c,onPanZoom:a,onPanZoomEnd:l}){return f=>{if(He(f,t))return!1;f.preventDefault(),f.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(f.ctrlKey&&s){const b=le(f),x=Si(f),E=d*Math.pow(2,x);o.scaleTo(n,E,b,f);return}const u=f.deltaMode===1?20:1;let h=r===Ae.Vertical?0:f.deltaX*u,g=r===Ae.Horizontal?0:f.deltaY*u;!Xt()&&f.shiftKey&&r!==Ae.Vertical&&(h=f.deltaY*u,g=0),o.translateBy(n,-(h/d)*i,-(g/d)*i,{internal:!0});const p=tn(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,c==null||c(f,p)),e.isPanScrolling&&(a==null||a(f,p),e.panScrollTimeout=setTimeout(()=>{l==null||l(f,p),e.isPanScrolling=!1},150))}}function Zd({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(o, r){if(!t&&o.type==="wheel"&&!o.ctrlKey||He(o,e))return null;o.preventDefault(),n.call(this,o,r)}}function Qd({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return o=>{var i,s,c;if((i=o.sourceEvent)!=null&&i.internal)return;const r=tn(o.transform);e.mouseButton=((s=o.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=r,((c=o.sourceEvent)==null?void 0:c.type)==="mousedown"&&t(!0),n&&(n==null||n(o.sourceEvent,r))}}function Jd({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:o,onPanZoom:r}){return i=>{var s,c;e.usedRightMouseButton=!!(n&&Ei(t,e.mouseButton??0)),(s=i.sourceEvent)!=null&&s.sync||o([i.transform.x,i.transform.y,i.transform.k]),r&&!((c=i.sourceEvent)!=null&&c.internal)&&(r==null||r(i.sourceEvent,tn(i.transform)))}}function ef({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:r,onPaneContextMenu:i}){return s=>{var c;if(!((c=s.sourceEvent)!=null&&c.internal)&&(e.isZoomingOrPanning=!1,i&&Ei(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&i(s.sourceEvent),e.usedRightMouseButton=!1,o(!1),r&&Ud(e.prevViewport,s.transform))){const a=tn(s.transform);e.prevViewport=a,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{r==null||r(s.sourceEvent,a)},n?150:0)}}}function tf({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:o,panOnScroll:r,zoomOnDoubleClick:i,userSelectionActive:s,noWheelClassName:c,noPanClassName:a,lib:l}){return f=>{var g;const d=e||t,u=n&&f.ctrlKey;if(f.button===1&&f.type==="mousedown"&&(He(f,`${l}-flow__node`)||He(f,`${l}-flow__edge`)))return!0;if(!o&&!d&&!r&&!i&&!n||s||He(f,c)&&f.type==="wheel"||He(f,a)&&(f.type!=="wheel"||r&&f.type==="wheel"&&!e)||!n&&f.ctrlKey&&f.type==="wheel")return!1;if(!n&&f.type==="touchstart"&&((g=f.touches)==null?void 0:g.length)>1)return f.preventDefault(),!1;if(!d&&!r&&!u&&f.type==="wheel"||!o&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(o)&&!o.includes(f.button)&&f.type==="mousedown")return!1;const h=Array.isArray(o)&&o.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||f.type==="wheel")&&h}}function nf({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:o,translateExtent:r,viewport:i,onPanZoom:s,onPanZoomStart:c,onPanZoomEnd:a,onDraggingChange:l}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),u=Kr().clickDistance(!fe(o)||o<0?0:o).scaleExtent([t,n]).translateExtent(r),h=ce(e).call(u);w({x:i.x,y:i.y,zoom:Fe(i.zoom,t,n)},[[0,0],[d.width,d.height]],r);const g=h.on("wheel.zoom"),p=h.on("dblclick.zoom");u.wheelDelta(Si);function b(R, z){return h?new Promise(m=>{u==null||u.transform(bn(h,z==null?void 0:z.duration,()=>m(!0)),R)}):Promise.resolve(!1)}function x({noWheelClassName:R,noPanClassName:z,onPaneContextMenu:m,userSelectionActive:M,panOnScroll:v,panOnDrag:I,panOnScrollMode:C,panOnScrollSpeed:k,preventScrolling:D,zoomOnPinch:j,zoomOnScroll:V,zoomOnDoubleClick:Y,zoomActivationKeyPressed:F,lib:X,onTransformChange:W}){M&&!f.isZoomingOrPanning&&E();const B=v&&!F&&!M?Kd({zoomPanValues:f,noWheelClassName:R,d3Selection:h,d3Zoom:u,panOnScrollMode:C,panOnScrollSpeed:k,zoomOnPinch:j,onPanZoomStart:c,onPanZoom:s,onPanZoomEnd:a}):Zd({noWheelClassName:R,preventScrolling:D,d3ZoomHandler:g});if(h.on("wheel.zoom",B,{passive:!1}),!M){const Z=Qd({zoomPanValues:f,onDraggingChange:l,onPanZoomStart:c});u.on("start",Z);const K=Jd({zoomPanValues:f,panOnDrag:I,onPaneContextMenu:!!m,onPanZoom:s,onTransformChange:W});u.on("zoom",K);const q=ef({zoomPanValues:f,panOnDrag:I,panOnScroll:v,onPaneContextMenu:m,onPanZoomEnd:a,onDraggingChange:l});u.on("end",q)}const U=tf({zoomActivationKeyPressed:F,panOnDrag:I,zoomOnScroll:V,panOnScroll:v,zoomOnDoubleClick:Y,zoomOnPinch:j,userSelectionActive:M,noPanClassName:z,noWheelClassName:R,lib:X});u.filter(U),Y?h.on("dblclick.zoom",p):h.on("dblclick.zoom",null)}function E(){u.on("zoom",null)}async function w(R, z, m){const M=vn(R),v=u==null?void 0:u.constrain()(M,z,m);return v&&await b(v),new Promise(I=>I(v))}async function y(R, z){const m=vn(R);return await b(m,z),new Promise(M=>M(m))}function S(R){if(h){const z=vn(R),m=h.property("__zoom");(m.k!==R.zoom||m.x!==R.x||m.y!==R.y)&&(u==null||u.transform(h,z,null,{sync:!0}))}}function P(){const R=h?Ur(h.node()):{x:0,y:0,k:1};return{x:R.x,y:R.y,zoom:R.k}}function N(R, z){return h?new Promise(m=>{u==null||u.scaleTo(bn(h,z==null?void 0:z.duration,()=>m(!0)),R)}):Promise.resolve(!1)}function H(R, z){return h?new Promise(m=>{u==null||u.scaleBy(bn(h,z==null?void 0:z.duration,()=>m(!0)),R)}):Promise.resolve(!1)}function T(R){u==null||u.scaleExtent(R)}function A(R){u==null||u.translateExtent(R)}function L(R){const z=!fe(R)||R<0?0:R;u==null||u.clickDistance(z)}return{update:x,destroy:E,setViewport:y,setViewportConstrained:w,getViewport:P,scaleTo:N,scaleBy:H,setScaleExtent:T,setTranslateExtent:A,syncViewport:S,setClickDistance:L}}var rt;(function(e){e.Line="line",e.Handle="handle"})(rt||(rt={}));function of({width:e,prevWidth:t,height:n,prevHeight:o,affectsX:r,affectsY:i}){const s=e-t,c=n-o,a=[s>0?1:s<0?-1:0,c>0?1:c<0?-1:0];return s&&r&&(a[0]=a[0]*-1),c&&i&&(a[1]=a[1]*-1),a}function rf(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),o=e.includes("left"),r=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:o,affectsY:r}}function Ee(e, t){return Math.max(0,t-e)}function Se(e, t){return Math.max(0,e-t)}function kt(e, t, n){return Math.max(0,t-e,e-n)}function qo(e, t){return e?!t:t}function sf(e, t, n, o, r, i, s, c){let{affectsX:a,affectsY:l}=t;const{isHorizontal:f,isVertical:d}=t,u=f&&d,{xSnapped:h,ySnapped:g}=n,{minWidth:p,maxWidth:b,minHeight:x,maxHeight:E}=o,{x:w,y,width:S,height:P,aspectRatio:N}=e;let H=Math.floor(f?h-e.pointerX:0),T=Math.floor(d?g-e.pointerY:0);const A=S+(a?-H:H),L=P+(l?-T:T),R=-i[0]*S,z=-i[1]*P;let m=kt(A,p,b),M=kt(L,x,E);if(s){let C=0,k=0;a&&H<0?C=Ee(w+H+R,s[0][0]):!a&&H>0&&(C=Se(w+A+R,s[1][0])),l&&T<0?k=Ee(y+T+z,s[0][1]):!l&&T>0&&(k=Se(y+L+z,s[1][1])),m=Math.max(m,C),M=Math.max(M,k)}if(c){let C=0,k=0;a&&H>0?C=Se(w+H,c[0][0]):!a&&H<0&&(C=Ee(w+A,c[1][0])),l&&T>0?k=Se(y+T,c[0][1]):!l&&T<0&&(k=Ee(y+L,c[1][1])),m=Math.max(m,C),M=Math.max(M,k)}if(r){if(f){const C=kt(A/N,x,E)*N;if(m=Math.max(m,C),s){let k=0;!a&&!l||a&&!l&&u?k=Se(y+z+A/N,s[1][1])*N:k=Ee(y+z+(a?H:-H)/N,s[0][1])*N,m=Math.max(m,k)}if(c){let k=0;!a&&!l||a&&!l&&u?k=Ee(y+A/N,c[1][1])*N:k=Se(y+(a?H:-H)/N,c[0][1])*N,m=Math.max(m,k)}}if(d){const C=kt(L*N,p,b)/N;if(M=Math.max(M,C),s){let k=0;!a&&!l||l&&!a&&u?k=Se(w+L*N+R,s[1][0])/N:k=Ee(w+(l?T:-T)*N+R,s[0][0])/N,M=Math.max(M,k)}if(c){let k=0;!a&&!l||l&&!a&&u?k=Ee(w+L*N,c[1][0])/N:k=Se(w+(l?T:-T)*N,c[0][0])/N,M=Math.max(M,k)}}}T=T+(T<0?M:-M),H=H+(H<0?m:-m),r&&(u?A>L*N?T=(qo(a,l)?-H:H)/N:H=(qo(a,l)?-T:T)*N:f?(T=H/N,l=a):(H=T*N,a=l));const v=a?w+H:w,I=l?y+T:y;return{width:S+(a?-H:H),height:P+(l?-T:T),x:i[0]*H*(a?-1:1)+v,y:i[1]*T*(l?-1:1)+I}}const Ni={width:0,height:0,x:0,y:0},cf={...Ni,pointerX:0,pointerY:0,aspectRatio:1};function af(e){return[[0,0],[e.measured.width,e.measured.height]]}function uf(e, t, n){const o=t.position.x+e.position.x,r=t.position.y+e.position.y,i=e.measured.width??0,s=e.measured.height??0,c=n[0]*i,a=n[1]*s;return[[o-c,r-a],[o+i-c,r+s-a]]}function lf({domNode:e,nodeId:t,getStoreItems:n,onChange:o,onEnd:r}){const i=ce(e);function s({controlPosition:a,boundaries:l,keepAspectRatio:f,onResizeStart:d,onResize:u,onResizeEnd:h,shouldResize:g}){let p={...Ni},b={...cf};const x=rf(a);let E,w=null,y=[],S,P,N;const H=Hr().on("start", T=>{const{nodeLookup:A,transform:L,snapGrid:R,snapToGrid:z,nodeOrigin:m,paneDomNode:M}=n();if(E=A.get(t),!E)return;w=(M==null?void 0:M.getBoundingClientRect())??null;const{xSnapped:v,ySnapped:I}=ot(T.sourceEvent,{transform:L,snapGrid:R,snapToGrid:z,containerBounds:w});p={width:E.measured.width??0,height:E.measured.height??0,x:E.position.x??0,y:E.position.y??0},b={...p,pointerX:v,pointerY:I,aspectRatio:p.width/p.height},S=void 0,E.parentId&&(E.extent==="parent"||E.expandParent)&&(S=A.get(E.parentId),P=S&&E.extent==="parent"?af(S):void 0),y=[],N=void 0;for(const[C,k]of A)if(k.parentId===t&&(y.push({id:C,position:{...k.position},extent:k.extent}),k.extent==="parent"||k.expandParent)){const D=uf(k,E,k.origin??m);N?N=[[Math.min(D[0][0],N[0][0]),Math.min(D[0][1],N[0][1])],[Math.max(D[1][0],N[1][0]),Math.max(D[1][1],N[1][1])]]:N=D}d==null||d(T,{...p})}).on("drag", T=>{const{transform:A,snapGrid:L,snapToGrid:R,nodeOrigin:z}=n(),m=ot(T.sourceEvent,{transform:A,snapGrid:L,snapToGrid:R,containerBounds:w}),M=[];if(!E)return;const{x:v,y:I,width:C,height:k}=p,D={},j=E.origin??z,{width:V,height:Y,x:F,y:X}=sf(b,x,m,l,f,j,P,N),W=V!==C,G=Y!==k,B=F!==v&&W,U=X!==I&&G;if(!B&&!U&&!W&&!G)return;if((B||U||j[0]===1||j[1]===1)&&(D.x=B?F:p.x,D.y=U?X:p.y,p.x=D.x,p.y=D.y,y.length>0)){const J=F-v,ee=X-I;for(const re of y)re.position={x:re.position.x-J+j[0]*(V-C),y:re.position.y-ee+j[1]*(Y-k)},M.push(re)}if((W||G)&&(D.width=W?V:p.width,D.height=G?Y:p.height,p.width=D.width,p.height=D.height),S&&E.expandParent){const J=j[0]*(D.width??0);D.x&&D.x<J&&(p.x=J,b.x=b.x-(D.x-J));const ee=j[1]*(D.height??0);D.y&&D.y<ee&&(p.y=ee,b.y=b.y-(D.y-ee))}const Z=of({width:p.width,prevWidth:C,height:p.height,prevHeight:k,affectsX:x.affectsX,affectsY:x.affectsY}),K={...p,direction:Z};(g==null?void 0:g(T,K))!==!1&&(u==null||u(T,K),o(D,M))}).on("end", T=>{h==null||h(T,{...p}),r==null||r()});i.call(H)}function c(){i.on(".drag",null)}return{update:s,destroy:c}}var Ci={exports:{}},Mi={},ki={exports:{}},Ii={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ye=$;function df(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ff=typeof Object.is=="function"?Object.is:df,hf=Ye.useState,gf=Ye.useEffect,pf=Ye.useLayoutEffect,mf=Ye.useDebugValue;function yf(e,t){var n=t(),o=hf({inst:{value:n,getSnapshot:t}}),r=o[0].inst,i=o[1];return pf(function(){r.value=n,r.getSnapshot=t,_n(r)&&i({inst:r})},[e,n,t]),gf(function(){return _n(r)&&i({inst:r}),e(function(){_n(r)&&i({inst:r})})},[e]),mf(n),n}function _n(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ff(e,n)}catch{return!0}}function xf(e,t){return t()}var wf=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?xf:yf;Ii.useSyncExternalStore=Ye.useSyncExternalStore!==void 0?Ye.useSyncExternalStore:wf;ki.exports=Ii;var vf=ki.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nn=$,bf=vf;function _f(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ef=typeof Object.is=="function"?Object.is:_f,Sf=bf.useSyncExternalStore,Nf=nn.useRef,Cf=nn.useEffect,Mf=nn.useMemo,kf=nn.useDebugValue;Mi.useSyncExternalStoreWithSelector=function(e,t,n,o,r){var i=Nf(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=Mf(function(){function a(h){if(!l){if(l=!0,f=h,h=o(h),r!==void 0&&s.hasValue){var g=s.value;if(r(g,h))return d=g}return d=h}if(g=d,Ef(f,h))return g;var p=o(h);return r!==void 0&&r(g,p)?(f=h,g):(f=h,d=p)}var l=!1,f,d,u=n===void 0?null:n;return[function(){return a(t())},u===null?void 0:function(){return a(u())}]},[t,n,o,r]);var c=Sf(e,i[0],i[1]);return Cf(function(){s.hasValue=!0,s.value=c},[c]),kf(c),c};Ci.exports=Mi;var If=Ci.exports;const $f=mc(If),Af={},Go=e=>{let t;const n=new Set,o=(f,d)=>{const u=typeof f=="function"?f(t):f;if(!Object.is(u,t)){const h=t;t=d??(typeof u!="object"||u===null)?u:Object.assign({},t,u),n.forEach(g=>g(t,h))}},r=()=>t,a={setState:o,getState:r,getInitialState:()=>l,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(Af?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},l=t=e(o,r,a);return a},Tf=e=>e?Go(e):Go,{useDebugValue:Pf}=yc,{useSyncExternalStoreWithSelector:Df}=$f,Hf=e=>e;function $i(e,t=Hf,n){const o=Df(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Pf(o),o}const Uo=(e,t)=>{const n=Tf(e),o=(r,i=t)=>$i(n,r,i);return Object.assign(o,n),o},zf=(e,t)=>e?Uo(e,t):Uo;function ne(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,r]of e)if(!Object.is(r,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}const on=$.createContext(null),Rf=on.Provider,Ai=be.error001();function Q(e,t){const n=$.useContext(on);if(n===null)throw new Error(Ai);return $i(n,e,t)}function te(){const e=$.useContext(on);if(e===null)throw new Error(Ai);return $.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const Ko={display:"none"},Lf={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ti="react-flow__node-desc",Pi="react-flow__edge-desc",jf="react-flow__aria-live",Vf=e=>e.ariaLiveMessage;function Bf({rfId:e}){const t=Q(Vf);return _.jsx("div",{id:`${jf}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Lf,children:t})}function Ff({rfId:e,disableKeyboardA11y:t}){return _.jsxs(_.Fragment,{children:[_.jsxs("div",{id:`${Ti}-${e}`,style:Ko,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),_.jsx("div",{id:`${Pi}-${e}`,style:Ko,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&_.jsx(Bf,{rfId:e})]})}const Of=e=>e.userSelectionActive?"none":"all",rn=$.forwardRef(({position:e="top-left",children:t,className:n,style:o,...r},i)=>{const s=Q(Of),c=`${e}`.split("-");return _.jsx("div",{className:oe(["react-flow__panel",n,...c]),style:{...o,pointerEvents:s},ref:i,...r,children:t})});function Xf({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:_.jsx(rn,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:_.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Yf=e=>{const t=[],n=[];for(const[,o]of e.nodeLookup)o.selected&&t.push(o.internals.userNode);for(const[,o]of e.edgeLookup)o.selected&&n.push(o);return{selectedNodes:t,selectedEdges:n}},It=e=>e.id;function Wf(e,t){return ne(e.selectedNodes.map(It),t.selectedNodes.map(It))&&ne(e.selectedEdges.map(It),t.selectedEdges.map(It))}function qf({onSelectionChange:e}){const t=te(),{selectedNodes:n,selectedEdges:o}=Q(Yf,Wf);return $.useEffect(()=>{const r={nodes:n,edges:o};e==null||e(r),t.getState().onSelectionChangeHandlers.forEach(i=>i(r))},[n,o,e]),null}const Gf=e=>!!e.onSelectionChangeHandlers;function Uf({onSelectionChange:e}){const t=Q(Gf);return e||t?_.jsx(qf,{onSelectionChange:e}):null}const Di=[0,0],Kf={x:0,y:0,zoom:1},Zf=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],Zo=[...Zf,"rfId"],Qf=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),Qo={translateExtent:lt,nodeOrigin:Di,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Jf(e){const{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:r,setTranslateExtent:i,setNodeExtent:s,reset:c,setDefaultNodesAndEdges:a,setPaneClickDistance:l}=Q(Qf,ne),f=te();$.useEffect(()=>(a(e.defaultNodes,e.defaultEdges),()=>{d.current=Qo,c()}),[]);const d=$.useRef(Qo);return $.useEffect(()=>{for(const u of Zo){const h=e[u],g=d.current[u];h!==g&&(typeof e[u]>"u"||(u==="nodes"?t(h):u==="edges"?n(h):u==="minZoom"?o(h):u==="maxZoom"?r(h):u==="translateExtent"?i(h):u==="nodeExtent"?s(h):u==="paneClickDistance"?l(h):u==="fitView"?f.setState({fitViewOnInit:h}):u==="fitViewOptions"?f.setState({fitViewOnInitOptions:h}):f.setState({[u]:h})))}d.current=e},Zo.map(u=>e[u])),null}function Jo(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function eh(e){var o;const[t,n]=$.useState(e==="system"?null:e);return $.useEffect(()=>{if(e!=="system"){n(e);return}const r=Jo(),i=()=>n(r!=null&&r.matches?"dark":"light");return i(),r==null||r.addEventListener("change",i),()=>{r==null||r.removeEventListener("change",i)}},[e]),t!==null?t:(o=Jo())!=null&&o.matches?"dark":"light"}const er=typeof document<"u"?document:null;function gt(e=null,t={target:er,actInsideInputWithModifier:!0}){const[n,o]=$.useState(!1),r=$.useRef(!1),i=$.useRef(new Set([])),[s,c]=$.useMemo(()=>{if(e!==null){const l=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.replace("+",`
`).replace(`

`,`
+`).split(`
`)),f=l.reduce((d,u)=>d.concat(...u),[]);return[l,f]}return[[],[]]},[e]);return $.useEffect(()=>{const a=(t==null?void 0:t.target)||er;if(e!==null){const l=u=>{if(r.current=u.ctrlKey||u.metaKey||u.shiftKey,(!r.current||r.current&&!t.actInsideInputWithModifier)&&zn(u))return!1;const g=nr(u.code,c);i.current.add(u[g]),tr(s,i.current,!1)&&(u.preventDefault(),o(!0))},f=u=>{if((!r.current||r.current&&!t.actInsideInputWithModifier)&&zn(u))return!1;const g=nr(u.code,c);tr(s,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(u[g]),u.key==="Meta"&&i.current.clear(),r.current=!1},d=()=>{i.current.clear(),o(!1)};return a==null||a.addEventListener("keydown",l),a==null||a.addEventListener("keyup",f),window.addEventListener("blur",d),window.addEventListener("contextmenu",d),()=>{a==null||a.removeEventListener("keydown",l),a==null||a.removeEventListener("keyup",f),window.removeEventListener("blur",d),window.removeEventListener("contextmenu",d)}}},[e,o]),n}function tr(e,t,n){return e.filter(o=>n||o.length===t.size).some(o=>o.every(r=>t.has(r)))}function nr(e,t){return t.includes(e)?"code":"key"}const th=()=>{const e=te();return $.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[o,r,i],panZoom:s}=e.getState();return s?(await s.setViewport({x:t.x??o,y:t.y??r,zoom:t.zoom??i},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},fitView:t=>{const{nodeLookup:n,minZoom:o,maxZoom:r,panZoom:i,domNode:s}=e.getState();if(!i||!s)return Promise.resolve(!1);const c=Pn(n,t),{width:a,height:l}=en(s);return Dn({nodes:c,width:a,height:l,minZoom:o,maxZoom:r,panZoom:i},t)},setCenter:async(t,n,o)=>{const{width:r,height:i,maxZoom:s,panZoom:c}=e.getState(),a=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:s,l=r/2-t*a,f=i/2-n*a;return c?(await c.setViewport({x:l,y:f,zoom:a},{duration:o==null?void 0:o.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:o,height:r,minZoom:i,maxZoom:s,panZoom:c}=e.getState(),a=no(t,o,r,i,s,(n==null?void 0:n.padding)??.1);return c?(await c.setViewport(a,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:o,snapGrid:r,domNode:i}=e.getState();if(!i)return t;const{x:s,y:c}=i.getBoundingClientRect(),a={x:t.x-s,y:t.y-c};return vt(a,o,n.snapToGrid,r)},flowToScreenPosition:t=>{const{transform:n,domNode:o}=e.getState();if(!o)return t;const{x:r,y:i}=o.getBoundingClientRect(),s=si(t,n);return{x:s.x+r,y:s.y+i}}}),[])};function Hi(e,t){const n=[],o=new Map,r=[];for(const i of e)if(i.type==="add"){r.push(i);continue}else if(i.type==="remove"||i.type==="replace")o.set(i.id,[i]);else{const s=o.get(i.id);s?s.push(i):o.set(i.id,[i])}for(const i of t){const s=o.get(i.id);if(!s){n.push(i);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){n.push({...s[0].item});continue}const c={...i};for(const a of s)nh(a,c);n.push(c)}return r.length&&r.forEach(i=>{i.index!==void 0?n.splice(i.index,0,{...i.item}):n.push({...i.item})}),n}function nh(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function zi(e,t){return Hi(e,t)}function Ri(e,t){return Hi(e,t)}function ke(e,t){return{id:e,type:"select",selected:t}}function ze(e,t=new Set,n=!1){const o=[];for(const[r,i]of e){const s=t.has(r);!(i.selected===void 0&&!s)&&i.selected!==s&&(n&&(i.selected=s),o.push(ke(i.id,s)))}return o}function or({items:e=[],lookup:t}){var r;const n=[],o=new Map(e.map(i=>[i.id,i]));for(const[i,s]of e.entries()){const c=t.get(s.id),a=((r=c==null?void 0:c.internals)==null?void 0:r.userNode)??c;a!==void 0&&a!==s&&n.push({id:s.id,item:s,type:"replace"}),a===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of t)o.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function rr(e){return{id:e.id,type:"remove"}}const ir=e=>vd(e),oh=e=>ei(e);function Li(e){return $.forwardRef(e)}const rh=typeof window<"u"?$.useLayoutEffect:$.useEffect;function sr(e){const[t,n]=$.useState(BigInt(0)),[o]=$.useState(()=>ih(()=>n(r=>r+BigInt(1))));return rh(()=>{const r=o.get();r.length&&(e(r),o.reset())},[t]),o}function ih(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const ji=$.createContext(null);function sh({children:e}){const t=te(),n=$.useCallback(c=>{const{nodes:a=[],setNodes:l,hasDefaultNodes:f,onNodesChange:d,nodeLookup:u}=t.getState();let h=a;for(const g of c)h=typeof g=="function"?g(h):g;f?l(h):d&&d(or({items:h,lookup:u}))},[]),o=sr(n),r=$.useCallback(c=>{const{edges:a=[],setEdges:l,hasDefaultEdges:f,onEdgesChange:d,edgeLookup:u}=t.getState();let h=a;for(const g of c)h=typeof g=="function"?g(h):g;f?l(h):d&&d(or({items:h,lookup:u}))},[]),i=sr(r),s=$.useMemo(()=>({nodeQueue:o,edgeQueue:i}),[]);return _.jsx(ji.Provider,{value:s,children:e})}function ch(){const e=$.useContext(ji);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const ah=e=>!!e.panZoom;function co(){const e=th(),t=te(),n=ch(),o=Q(ah),r=$.useMemo(()=>{const i=d=>t.getState().nodeLookup.get(d),s=d=>{n.nodeQueue.push(d)},c=d=>{n.edgeQueue.push(d)},a=d=>{var x,E;const{nodeLookup:u,nodeOrigin:h}=t.getState(),g=ir(d)?d:u.get(d.id),p=g.parentId?ai(g.position,g.measured,g.parentId,u,h):g.position,b={...g,position:p,width:((x=g.measured)==null?void 0:x.width)??g.width,height:((E=g.measured)==null?void 0:E.height)??g.height};return Oe(b)},l=(d,u,h={replace:!1})=>{s(g=>g.map(p=>{if(p.id===d){const b=typeof u=="function"?u(p):u;return h.replace&&ir(b)?b:{...p,...b}}return p}))},f=(d,u,h={replace:!1})=>{c(g=>g.map(p=>{if(p.id===d){const b=typeof u=="function"?u(p):u;return h.replace&&oh(b)?b:{...p,...b}}return p}))};return{getNodes:()=>t.getState().nodes.map(d=>({...d})),getNode:d=>{var u;return(u=i(d))==null?void 0:u.internals.userNode},getInternalNode:i,getEdges:()=>{const{edges:d=[]}=t.getState();return d.map(u=>({...u}))},getEdge:d=>t.getState().edgeLookup.get(d),setNodes:s,setEdges:c,addNodes:d=>{const u=Array.isArray(d)?d:[d];n.nodeQueue.push(h=>[...h,...u])},addEdges:d=>{const u=Array.isArray(d)?d:[d];n.edgeQueue.push(h=>[...h,...u])},toObject:()=>{const{nodes:d=[],edges:u=[],transform:h}=t.getState(),[g,p,b]=h;return{nodes:d.map(x=>({...x})),edges:u.map(x=>({...x})),viewport:{x:g,y:p,zoom:b}}},deleteElements:async({nodes:d=[],edges:u=[]})=>{const{nodes:h,edges:g,onNodesDelete:p,onEdgesDelete:b,triggerNodeChanges:x,triggerEdgeChanges:E,onDelete:w,onBeforeDelete:y}=t.getState(),{nodes:S,edges:P}=await Ed({nodesToRemove:d,edgesToRemove:u,nodes:h,edges:g,onBeforeDelete:y}),N=P.length>0,H=S.length>0;if(N){const T=P.map(rr);b==null||b(P),E(T)}if(H){const T=S.map(rr);p==null||p(S),x(T)}return(H||N)&&(w==null||w({nodes:S,edges:P})),{deletedNodes:S,deletedEdges:P}},getIntersectingNodes:(d,u=!0,h)=>{const g=zo(d),p=g?d:a(d),b=h!==void 0;return p?(h||t.getState().nodes).filter(x=>{const E=t.getState().nodeLookup.get(x.id);if(E&&!g&&(x.id===d.id||!E.internals.positionAbsolute))return!1;const w=Oe(b?x:E),y=ft(w,p);return u&&y>0||y>=p.width*p.height}):[]},isNodeIntersecting:(d,u,h=!0)=>{const p=zo(d)?d:a(d);if(!p)return!1;const b=ft(p,u);return h&&b>0||b>=p.width*p.height},updateNode:l,updateNodeData:(d,u,h={replace:!1})=>{l(d,g=>{const p=typeof u=="function"?u(g):u;return h.replace?{...g,data:p}:{...g,data:{...g.data,...p}}},h)},updateEdge:f,updateEdgeData:(d,u,h={replace:!1})=>{f(d,g=>{const p=typeof u=="function"?u(g):u;return h.replace?{...g,data:p}:{...g,data:{...g.data,...p}}},h)},getNodesBounds:d=>{const{nodeLookup:u,nodeOrigin:h}=t.getState();return bd(d,{nodeLookup:u,nodeOrigin:h})},getHandleConnections:({type:d,id:u,nodeId:h})=>{var g;return Array.from(((g=t.getState().connectionLookup.get(`${h}-${d}${u?`-${u}`:""}`))==null?void 0:g.values())??[])},getNodeConnections:({type:d,handleId:u,nodeId:h})=>{var g;return Array.from(((g=t.getState().connectionLookup.get(`${h}${d?u?`-${d}-${u}`:`-${d}`:""}`))==null?void 0:g.values())??[])}}},[]);return $.useMemo(()=>({...r,...e,viewportInitialized:o}),[o])}const cr=e=>e.selected,uh={actInsideInputWithModifier:!1},lh=typeof window<"u"?window:void 0;function dh({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=te(),{deleteElements:o}=co(),r=gt(e,uh),i=gt(t,{target:lh});$.useEffect(()=>{if(r){const{edges:s,nodes:c}=n.getState();o({nodes:c.filter(cr),edges:s.filter(cr)}),n.setState({nodesSelectionActive:!1})}},[r]),$.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])}function fh(e){const t=te();$.useEffect(()=>{const n=()=>{var r,i;if(!e.current)return!1;const o=en(e.current);(o.height===0||o.width===0)&&((i=(r=t.getState()).onError)==null||i.call(r,"004",be.error004())),t.setState({width:o.width||500,height:o.height||500})};if(e.current){n(),window.addEventListener("resize",n);const o=new ResizeObserver(()=>n());return o.observe(e.current),()=>{window.removeEventListener("resize",n),o&&e.current&&o.unobserve(e.current)}}},[])}const sn={position:"absolute",width:"100%",height:"100%",top:0,left:0},hh=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function gh({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:o=!1,panOnScrollSpeed:r=.5,panOnScrollMode:i=Ae.Free,zoomOnDoubleClick:s=!0,panOnDrag:c=!0,defaultViewport:a,translateExtent:l,minZoom:f,maxZoom:d,zoomActivationKeyCode:u,preventScrolling:h=!0,children:g,noWheelClassName:p,noPanClassName:b,onViewportChange:x,isControlledViewport:E,paneClickDistance:w}){const y=te(),S=$.useRef(null),{userSelectionActive:P,lib:N}=Q(hh,ne),H=gt(u),T=$.useRef();fh(S);const A=$.useCallback(L=>{x==null||x({x:L[0],y:L[1],zoom:L[2]}),E||y.setState({transform:L})},[x,E]);return $.useEffect(()=>{if(S.current){T.current=nf({domNode:S.current,minZoom:f,maxZoom:d,translateExtent:l,viewport:a,paneClickDistance:w,onDraggingChange:m=>y.setState({paneDragging:m}),onPanZoomStart:(m,M)=>{const{onViewportChangeStart:v,onMoveStart:I}=y.getState();I==null||I(m,M),v==null||v(M)},onPanZoom:(m,M)=>{const{onViewportChange:v,onMove:I}=y.getState();I==null||I(m,M),v==null||v(M)},onPanZoomEnd:(m,M)=>{const{onViewportChangeEnd:v,onMoveEnd:I}=y.getState();I==null||I(m,M),v==null||v(M)}});const{x:L,y:R,zoom:z}=T.current.getViewport();return y.setState({panZoom:T.current,transform:[L,R,z],domNode:S.current.closest(".react-flow")}),()=>{var m;(m=T.current)==null||m.destroy()}}},[]),$.useEffect(()=>{var L;(L=T.current)==null||L.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:o,panOnScrollSpeed:r,panOnScrollMode:i,zoomOnDoubleClick:s,panOnDrag:c,zoomActivationKeyPressed:H,preventScrolling:h,noPanClassName:b,userSelectionActive:P,noWheelClassName:p,lib:N,onTransformChange:A})},[e,t,n,o,r,i,s,c,H,h,b,P,p,N,A]),_.jsx("div",{className:"react-flow__renderer",ref:S,style:sn,children:g})}const ph=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function mh(){const{userSelectionActive:e,userSelectionRect:t}=Q(ph,ne);return e&&t?_.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const En=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},yh=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function xh({isSelecting:e,selectionKeyPressed:t,selectionMode:n=dt.Full,panOnDrag:o,selectionOnDrag:r,onSelectionStart:i,onSelectionEnd:s,onPaneClick:c,onPaneContextMenu:a,onPaneScroll:l,onPaneMouseEnter:f,onPaneMouseMove:d,onPaneMouseLeave:u,children:h}){const g=te(),{userSelectionActive:p,elementsSelectable:b,dragging:x}=Q(yh,ne),E=b&&(e||p),w=$.useRef(null),y=$.useRef(),S=$.useRef(new Set),P=$.useRef(new Set),N=$.useRef(!1),H=$.useRef(!1),T=v=>{if(N.current){N.current=!1;return}c==null||c(v),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},A=v=>{if(Array.isArray(o)&&(o!=null&&o.includes(2))){v.preventDefault();return}a==null||a(v)},L=l?v=>l(v):void 0,R=v=>{var j,V;const{resetSelectedElements:I,domNode:C}=g.getState();if(y.current=C==null?void 0:C.getBoundingClientRect(),!b||!e||v.button!==0||v.target!==w.current||!y.current)return;(V=(j=v.target)==null?void 0:j.setPointerCapture)==null||V.call(j,v.pointerId),H.current=!0,N.current=!1;const{x:k,y:D}=we(v.nativeEvent,y.current);I(),g.setState({userSelectionRect:{width:0,height:0,startX:k,startY:D,x:k,y:D}}),i==null||i(v)},z=v=>{const{userSelectionRect:I,transform:C,nodeLookup:k,edgeLookup:D,connectionLookup:j,triggerNodeChanges:V,triggerEdgeChanges:Y,defaultEdgeOptions:F}=g.getState();if(!y.current||!I)return;N.current=!0;const{x:X,y:W}=we(v.nativeEvent,y.current),{startX:G,startY:B}=I,U={startX:G,startY:B,x:X<G?X:G,y:W<B?W:B,width:Math.abs(X-G),height:Math.abs(W-B)},Z=S.current,K=P.current;S.current=new Set(ti(k,U,C,n===dt.Partial,!0).map(J=>J.id)),P.current=new Set;const q=(F==null?void 0:F.selectable)??!0;for(const J of S.current){const ee=j.get(J);if(ee)for(const{edgeId:re}of ee.values()){const ue=D.get(re);ue&&(ue.selectable??q)&&P.current.add(re)}}if(!Ro(Z,S.current)){const J=ze(k,S.current,!0);V(J)}if(!Ro(K,P.current)){const J=ze(D,P.current);Y(J)}g.setState({userSelectionRect:U,userSelectionActive:!0,nodesSelectionActive:!1})},m=v=>{var C,k;if(v.button!==0||!H.current)return;(k=(C=v.target)==null?void 0:C.releasePointerCapture)==null||k.call(C,v.pointerId);const{userSelectionRect:I}=g.getState();!p&&I&&v.target===w.current&&(T==null||T(v)),g.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:S.current.size>0}),s==null||s(v),(t||r)&&(N.current=!1),H.current=!1},M=o===!0||Array.isArray(o)&&o.includes(0);return _.jsxs("div",{className:oe(["react-flow__pane",{draggable:M,dragging:x,selection:e}]),onClick:E?void 0:En(T,w),onContextMenu:En(A,w),onWheel:En(L,w),onPointerEnter:E?void 0:f,onPointerDown:E?R:d,onPointerMove:E?z:d,onPointerUp:E?m:void 0,onPointerLeave:u,ref:w,style:sn,children:[h,_.jsx(mh,{})]})}function Bn({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:s,nodeLookup:c,onError:a}=t.getState(),l=c.get(e);if(!l){a==null||a("012",be.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&s)&&(i({nodes:[l],edges:[]}),requestAnimationFrame(()=>{var f;return(f=o==null?void 0:o.current)==null?void 0:f.blur()})):r([e])}function Vi({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:i,nodeClickDistance:s}){const c=te(),[a,l]=$.useState(!1),f=$.useRef();return $.useEffect(()=>{f.current=Fd({getStoreItems:()=>c.getState(),onNodeMouseDown:d=>{Bn({id:d,store:c,nodeRef:e})},onDragStart:()=>{l(!0)},onDragStop:()=>{l(!1)}})},[]),$.useEffect(()=>{var d,u;if(t)(d=f.current)==null||d.destroy();else if(e.current)return(u=f.current)==null||u.update({noDragClassName:n,handleSelector:o,domNode:e.current,isSelectable:i,nodeId:r,nodeClickDistance:s}),()=>{var h;(h=f.current)==null||h.destroy()}},[n,o,t,i,e,r]),a}const wh=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function Bi(){const e=te();return $.useCallback(n=>{const{nodeExtent:o,snapToGrid:r,snapGrid:i,nodesDraggable:s,onError:c,updateNodePositions:a,nodeLookup:l,nodeOrigin:f}=e.getState(),d=new Map,u=wh(s),h=r?i[0]:5,g=r?i[1]:5,p=n.direction.x*h*n.factor,b=n.direction.y*g*n.factor;for(const[,x]of l){if(!u(x))continue;let E={x:x.internals.positionAbsolute.x+p,y:x.internals.positionAbsolute.y+b};r&&(E=Jt(E,i));const{position:w,positionAbsolute:y}=ni({nodeId:x.id,nextPosition:E,nodeLookup:l,nodeExtent:o,nodeOrigin:f,onError:c});x.position=w,x.internals.positionAbsolute=y,d.set(x.id,x)}a(d)},[])}const ao=$.createContext(null),vh=ao.Provider;ao.Consumer;const Fi=()=>$.useContext(ao),bh=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),_h=(e,t,n)=>o=>{const{connectionClickStartHandle:r,connectionMode:i,connection:s}=o,{fromHandle:c,toHandle:a,isValid:l}=s,f=(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n;return{connectingFrom:(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n,connectingTo:f,clickConnecting:(r==null?void 0:r.nodeId)===e&&(r==null?void 0:r.id)===t&&(r==null?void 0:r.type)===n,isPossibleEndHandle:i===Be.Strict?(c==null?void 0:c.type)!==n:e!==(c==null?void 0:c.nodeId)||t!==(c==null?void 0:c.id),connectionInProcess:!!c,valid:f&&l}};function Eh({type:e="source",position:t=O.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:r=!0,isConnectableEnd:i=!0,id:s,onConnect:c,children:a,className:l,onMouseDown:f,onTouchStart:d,...u},h){var m,M;const g=s||null,p=e==="target",b=te(),x=Fi(),{connectOnClick:E,noPanClassName:w,rfId:y}=Q(bh,ne),{connectingFrom:S,connectingTo:P,clickConnecting:N,isPossibleEndHandle:H,connectionInProcess:T,valid:A}=Q(_h(x,g,e),ne);x||(M=(m=b.getState()).onError)==null||M.call(m,"010",be.error010());const L=v=>{const{defaultEdgeOptions:I,onConnect:C,hasDefaultEdges:k}=b.getState(),D={...I,...v};if(k){const{edges:j,setEdges:V}=b.getState();V(gi(D,j))}C==null||C(D),c==null||c(D)},R=v=>{if(!x)return;const I=li(v.nativeEvent);if(r&&(I&&v.button===0||!I)){const C=b.getState();Vn.onPointerDown(v.nativeEvent,{autoPanOnConnect:C.autoPanOnConnect,connectionMode:C.connectionMode,connectionRadius:C.connectionRadius,domNode:C.domNode,nodeLookup:C.nodeLookup,lib:C.lib,isTarget:p,handleId:g,nodeId:x,flowId:C.rfId,panBy:C.panBy,cancelConnection:C.cancelConnection,onConnectStart:C.onConnectStart,onConnectEnd:C.onConnectEnd,updateConnection:C.updateConnection,onConnect:L,isValidConnection:n||C.isValidConnection,getTransform:()=>b.getState().transform,getFromHandle:()=>b.getState().connection.fromHandle,autoPanSpeed:C.autoPanSpeed})}I?f==null||f(v):d==null||d(v)},z=v=>{const{onClickConnectStart:I,onClickConnectEnd:C,connectionClickStartHandle:k,connectionMode:D,isValidConnection:j,lib:V,rfId:Y,nodeLookup:F,connection:X}=b.getState();if(!x||!k&&!r)return;if(!k){I==null||I(v.nativeEvent,{nodeId:x,handleId:g,handleType:e}),b.setState({connectionClickStartHandle:{nodeId:x,type:e,id:g}});return}const W=ui(v.target),G=n||j,{connection:B,isValid:U}=Vn.isValid(v.nativeEvent,{handle:{nodeId:x,id:g,type:e},connectionMode:D,fromNodeId:k.nodeId,fromHandleId:k.id||null,fromType:k.type,isValidConnection:G,flowId:Y,doc:W,lib:V,nodeLookup:F});U&&B&&L(B);const Z=structuredClone(X);delete Z.inProgress,Z.toPosition=Z.toHandle?Z.toHandle.position:null,C==null||C(v,Z),b.setState({connectionClickStartHandle:null})};return _.jsx("div",{"data-handleid":g,"data-nodeid":x,"data-handlepos":t,"data-id":`${y}-${x}-${g}-${e}`,className:oe(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",w,l,{source:!p,target:p,connectable:o,connectablestart:r,connectableend:i,clickconnecting:N,connectingfrom:S,connectingto:P,valid:A,connectionindicator:o&&(!T||H)&&(T?i:r)}]),onMouseDown:R,onTouchStart:R,onClick:E?z:void 0,ref:h,...u,children:a})}const De=$.memo(Li(Eh));function Sh({data:e,isConnectable:t,sourcePosition:n=O.Bottom}){return _.jsxs(_.Fragment,{children:[e==null?void 0:e.label,_.jsx(De,{type:"source",position:n,isConnectable:t})]})}function Nh({data:e,isConnectable:t,targetPosition:n=O.Top,sourcePosition:o=O.Bottom}){return _.jsxs(_.Fragment,{children:[_.jsx(De,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,_.jsx(De,{type:"source",position:o,isConnectable:t})]})}function Ch(){return null}function Mh({data:e,isConnectable:t,targetPosition:n=O.Top}){return _.jsxs(_.Fragment,{children:[_.jsx(De,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Yt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},ar={input:Sh,default:Nh,output:Mh,group:Ch};function kh(e){var t,n,o,r;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((o=e.style)==null?void 0:o.width),height:e.height??((r=e.style)==null?void 0:r.height)}}const Ih=e=>{const{width:t,height:n,x:o,y:r}=wt(e.nodeLookup,{filter:i=>!!i.selected});return{width:fe(t)?t:null,height:fe(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${r}px)`}};function $h({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const o=te(),{width:r,height:i,transformString:s,userSelectionActive:c}=Q(Ih,ne),a=Bi(),l=$.useRef(null);if($.useEffect(()=>{var u;n||(u=l.current)==null||u.focus({preventScroll:!0})},[n]),Vi({nodeRef:l}),c||!r||!i)return null;const f=e?u=>{const h=o.getState().nodes.filter(g=>g.selected);e(u,h)}:void 0,d=u=>{Object.prototype.hasOwnProperty.call(Yt,u.key)&&(u.preventDefault(),a({direction:Yt[u.key],factor:u.shiftKey?4:1}))};return _.jsx("div",{className:oe(["react-flow__nodesselection","react-flow__container",t]),style:{transform:s},children:_.jsx("div",{ref:l,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:d,style:{width:r,height:i}})})}const ur=typeof window<"u"?window:void 0,Ah=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Oi({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:s,paneClickDistance:c,deleteKeyCode:a,selectionKeyCode:l,selectionOnDrag:f,selectionMode:d,onSelectionStart:u,onSelectionEnd:h,multiSelectionKeyCode:g,panActivationKeyCode:p,zoomActivationKeyCode:b,elementsSelectable:x,zoomOnScroll:E,zoomOnPinch:w,panOnScroll:y,panOnScrollSpeed:S,panOnScrollMode:P,zoomOnDoubleClick:N,panOnDrag:H,defaultViewport:T,translateExtent:A,minZoom:L,maxZoom:R,preventScrolling:z,onSelectionContextMenu:m,noWheelClassName:M,noPanClassName:v,disableKeyboardA11y:I,onViewportChange:C,isControlledViewport:k}){const{nodesSelectionActive:D,userSelectionActive:j}=Q(Ah),V=gt(l,{target:ur}),Y=gt(p,{target:ur}),F=Y||H,X=Y||y,W=f&&F!==!0,G=V||j||W;return dh({deleteKeyCode:a,multiSelectionKeyCode:g}),_.jsx(gh,{onPaneContextMenu:i,elementsSelectable:x,zoomOnScroll:E,zoomOnPinch:w,panOnScroll:X,panOnScrollSpeed:S,panOnScrollMode:P,zoomOnDoubleClick:N,panOnDrag:!V&&F,defaultViewport:T,translateExtent:A,minZoom:L,maxZoom:R,zoomActivationKeyCode:b,preventScrolling:z,noWheelClassName:M,noPanClassName:v,onViewportChange:C,isControlledViewport:k,paneClickDistance:c,children:_.jsxs(xh,{onSelectionStart:u,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:F,isSelecting:!!G,selectionMode:d,selectionKeyPressed:V,selectionOnDrag:W,children:[e,D&&_.jsx($h,{onSelectionContextMenu:m,noPanClassName:v,disableKeyboardA11y:I})]})})}Oi.displayName="FlowRenderer";const Th=$.memo(Oi),Ph=e=>t=>e?ti(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function Dh(e){return Q($.useCallback(Ph(e),[e]),ne)}const Hh=e=>e.updateNodeInternals;function zh(){const e=Q(Hh),[t]=$.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const o=new Map;n.forEach(r=>{const i=r.target.getAttribute("data-id");o.set(i,{id:i,nodeElement:r.target,force:!0})}),e(o)}));return $.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function Rh({node:e,nodeType:t,hasDimensions:n,resizeObserver:o}){const r=te(),i=$.useRef(null),s=$.useRef(null),c=$.useRef(e.sourcePosition),a=$.useRef(e.targetPosition),l=$.useRef(t),f=n&&!!e.internals.handleBounds;return $.useEffect(()=>{i.current&&!e.hidden&&(!f||s.current!==i.current)&&(s.current&&(o==null||o.unobserve(s.current)),o==null||o.observe(i.current),s.current=i.current)},[f,e.hidden]),$.useEffect(()=>()=>{s.current&&(o==null||o.unobserve(s.current),s.current=null)},[]),$.useEffect(()=>{if(i.current){const d=l.current!==t,u=c.current!==e.sourcePosition,h=a.current!==e.targetPosition;(d||u||h)&&(l.current=t,c.current=e.sourcePosition,a.current=e.targetPosition,r.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),i}function Lh({id:e,onClick:t,onMouseEnter:n,onMouseMove:o,onMouseLeave:r,onContextMenu:i,onDoubleClick:s,nodesDraggable:c,elementsSelectable:a,nodesConnectable:l,nodesFocusable:f,resizeObserver:d,noDragClassName:u,noPanClassName:h,disableKeyboardA11y:g,rfId:p,nodeTypes:b,nodeExtent:x,nodeClickDistance:E,onError:w}){const{node:y,internals:S,isParent:P}=Q(B=>{const U=B.nodeLookup.get(e),Z=B.parentLookup.has(e);return{node:U,internals:U.internals,isParent:Z}},ne);let N=y.type||"default",H=(b==null?void 0:b[N])||ar[N];H===void 0&&(w==null||w("003",be.error003(N)),N="default",H=ar.default);const T=!!(y.draggable||c&&typeof y.draggable>"u"),A=!!(y.selectable||a&&typeof y.selectable>"u"),L=!!(y.connectable||l&&typeof y.connectable>"u"),R=!!(y.focusable||f&&typeof y.focusable>"u"),z=te(),m=ci(y),M=Rh({node:y,nodeType:N,hasDimensions:m,resizeObserver:d}),v=Vi({nodeRef:M,disabled:y.hidden||!T,noDragClassName:u,handleSelector:y.dragHandle,nodeId:e,isSelectable:A,nodeClickDistance:E}),I=Bi();if(y.hidden)return null;const C=_e(y),k=kh(y),D=A||T||t||n||o||r,j=n?B=>n(B,{...S.userNode}):void 0,V=o?B=>o(B,{...S.userNode}):void 0,Y=r?B=>r(B,{...S.userNode}):void 0,F=i?B=>i(B,{...S.userNode}):void 0,X=s?B=>s(B,{...S.userNode}):void 0,W=B=>{const{selectNodesOnDrag:U,nodeDragThreshold:Z}=z.getState();A&&(!U||!T||Z>0)&&Bn({id:e,store:z,nodeRef:M}),t&&t(B,{...S.userNode})},G=B=>{if(!(zn(B.nativeEvent)||g))if(Zr.includes(B.key)&&A){const U=B.key==="Escape";Bn({id:e,store:z,unselect:U,nodeRef:M})}else T&&y.selected&&Object.prototype.hasOwnProperty.call(Yt,B.key)&&(B.preventDefault(),z.setState({ariaLiveMessage:`Moved selected node ${B.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~S.positionAbsolute.x}, y: ${~~S.positionAbsolute.y}`}),I({direction:Yt[B.key],factor:B.shiftKey?4:1}))};return _.jsx("div",{className:oe(["react-flow__node",`react-flow__node-${N}`,{[h]:T},y.className,{selected:y.selected,selectable:A,parent:P,draggable:T,dragging:v}]),ref:M,style:{zIndex:S.z,transform:`translate(${S.positionAbsolute.x}px,${S.positionAbsolute.y}px)`,pointerEvents:D?"all":"none",visibility:m?"visible":"hidden",...y.style,...k},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:j,onMouseMove:V,onMouseLeave:Y,onContextMenu:F,onClick:W,onDoubleClick:X,onKeyDown:R?G:void 0,tabIndex:R?0:void 0,role:R?"button":void 0,"aria-describedby":g?void 0:`${Ti}-${p}`,"aria-label":y.ariaLabel,children:_.jsx(vh,{value:e,children:_.jsx(H,{id:e,data:y.data,type:N,positionAbsoluteX:S.positionAbsolute.x,positionAbsoluteY:S.positionAbsolute.y,selected:y.selected??!1,selectable:A,draggable:T,deletable:y.deletable??!0,isConnectable:L,sourcePosition:y.sourcePosition,targetPosition:y.targetPosition,dragging:v,dragHandle:y.dragHandle,zIndex:S.z,parentId:y.parentId,...C})})})}const jh=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Xi(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,onError:i}=Q(jh,ne),s=Dh(e.onlyRenderVisibleElements),c=zh();return _.jsx("div",{className:"react-flow__nodes",style:sn,children:s.map(a=>_.jsx(Lh,{id:a,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:c,nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,nodeClickDistance:e.nodeClickDistance,onError:i},a))})}Xi.displayName="NodeRenderer";const Vh=$.memo(Xi);function Bh(e){return Q($.useCallback(n=>{if(!e)return n.edges.map(r=>r.id);const o=[];if(n.width&&n.height)for(const r of n.edges){const i=n.nodeLookup.get(r.source),s=n.nodeLookup.get(r.target);i&&s&&Md({sourceNode:i,targetNode:s,width:n.width,height:n.height,transform:n.transform})&&o.push(r.id)}return o},[e]),ne)}const Fh=({color:e="none",strokeWidth:t=1})=>_.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Oh=({color:e="none",strokeWidth:t=1})=>_.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),lr={[Ft.Arrow]:Fh,[Ft.ArrowClosed]:Oh};function Xh(e){const t=te();return $.useMemo(()=>{var r,i;return Object.prototype.hasOwnProperty.call(lr,e)?lr[e]:((i=(r=t.getState()).onError)==null||i.call(r,"009",be.error009(e)),null)},[e])}const Yh=({id:e,type:t,color:n,width:o=12.5,height:r=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:c="auto-start-reverse"})=>{const a=Xh(t);return a?_.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:c,refX:"0",refY:"0",children:_.jsx(a,{color:n,strokeWidth:s})}):null},Yi=({defaultColor:e,rfId:t})=>{const n=Q(i=>i.edges),o=Q(i=>i.defaultEdgeOptions),r=$.useMemo(()=>Dd(n,{id:t,defaultColor:e,defaultMarkerStart:o==null?void 0:o.markerStart,defaultMarkerEnd:o==null?void 0:o.markerEnd}),[n,o,t,e]);return r.length?_.jsx("svg",{className:"react-flow__marker",children:_.jsx("defs",{children:r.map(i=>_.jsx(Yh,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})}):null};Yi.displayName="MarkerDefinitions";var Wh=$.memo(Yi);function Wi({x:e,y:t,label:n,labelStyle:o={},labelShowBg:r=!0,labelBgStyle:i={},labelBgPadding:s=[2,4],labelBgBorderRadius:c=2,children:a,className:l,...f}){const[d,u]=$.useState({x:1,y:0,width:0,height:0}),h=oe(["react-flow__edge-textwrapper",l]),g=$.useRef(null);return $.useEffect(()=>{if(g.current){const p=g.current.getBBox();u({x:p.x,y:p.y,width:p.width,height:p.height})}},[n]),typeof n>"u"||!n?null:_.jsxs("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:h,visibility:d.width?"visible":"hidden",...f,children:[r&&_.jsx("rect",{width:d.width+2*s[0],x:-s[0],y:-s[1],height:d.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:c,ry:c}),_.jsx("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:g,style:o,children:n}),a]})}Wi.displayName="EdgeText";const qh=$.memo(Wi);function cn({path:e,labelX:t,labelY:n,label:o,labelStyle:r,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:a,interactionWidth:l=20,...f}){return _.jsxs(_.Fragment,{children:[_.jsx("path",{...f,d:e,fill:"none",className:oe(["react-flow__edge-path",f.className])}),l&&_.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:l,className:"react-flow__edge-interaction"}),o&&fe(t)&&fe(n)?_.jsx(qh,{x:t,y:n,label:o,labelStyle:r,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:a}):null]})}function dr({pos:e,x1:t,y1:n,x2:o,y2:r}){return e===O.Left||e===O.Right?[.5*(t+o),n]:[t,.5*(n+r)]}function qi({sourceX:e,sourceY:t,sourcePosition:n=O.Bottom,targetX:o,targetY:r,targetPosition:i=O.Top}){const[s,c]=dr({pos:n,x1:e,y1:t,x2:o,y2:r}),[a,l]=dr({pos:i,x1:o,y1:r,x2:e,y2:t}),[f,d,u,h]=di({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:s,sourceControlY:c,targetControlX:a,targetControlY:l});return[`M${e},${t} C${s},${c} ${a},${l} ${o},${r}`,f,d,u,h]}function Gi(e){return $.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,sourcePosition:s=O.Bottom,targetPosition:c=O.Top,label:a,labelStyle:l,labelShowBg:f,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:g,markerEnd:p,markerStart:b,interactionWidth:x})=>{const[E,w,y]=qi({sourceX:n,sourceY:o,sourcePosition:s,targetX:r,targetY:i,targetPosition:c}),S=e.isInternal?void 0:t;return _.jsx(cn,{id:S,path:E,labelX:w,labelY:y,label:a,labelStyle:l,labelShowBg:f,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:g,markerEnd:p,markerStart:b,interactionWidth:x})})}const Gh=Gi({isInternal:!1}),Ui=Gi({isInternal:!0});Gh.displayName="SimpleBezierEdge";Ui.displayName="SimpleBezierEdgeInternal";function Ki(e){return $.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,label:s,labelStyle:c,labelShowBg:a,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:d,style:u,sourcePosition:h=O.Bottom,targetPosition:g=O.Top,markerEnd:p,markerStart:b,pathOptions:x,interactionWidth:E})=>{const[w,y,S]=Rn({sourceX:n,sourceY:o,sourcePosition:h,targetX:r,targetY:i,targetPosition:g,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset}),P=e.isInternal?void 0:t;return _.jsx(cn,{id:P,path:w,labelX:y,labelY:S,label:s,labelStyle:c,labelShowBg:a,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:d,style:u,markerEnd:p,markerStart:b,interactionWidth:E})})}const Zi=Ki({isInternal:!1}),Qi=Ki({isInternal:!0});Zi.displayName="SmoothStepEdge";Qi.displayName="SmoothStepEdgeInternal";function Ji(e){return $.memo(({id:t,...n})=>{var r;const o=e.isInternal?void 0:t;return _.jsx(Zi,{...n,id:o,pathOptions:$.useMemo(()=>{var i;return{borderRadius:0,offset:(i=n.pathOptions)==null?void 0:i.offset}},[(r=n.pathOptions)==null?void 0:r.offset])})})}const Uh=Ji({isInternal:!1}),es=Ji({isInternal:!0});Uh.displayName="StepEdge";es.displayName="StepEdgeInternal";function ts(e){return $.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,label:s,labelStyle:c,labelShowBg:a,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:d,style:u,markerEnd:h,markerStart:g,interactionWidth:p})=>{const[b,x,E]=pi({sourceX:n,sourceY:o,targetX:r,targetY:i}),w=e.isInternal?void 0:t;return _.jsx(cn,{id:w,path:b,labelX:x,labelY:E,label:s,labelStyle:c,labelShowBg:a,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:d,style:u,markerEnd:h,markerStart:g,interactionWidth:p})})}const Kh=ts({isInternal:!1}),ns=ts({isInternal:!0});Kh.displayName="StraightEdge";ns.displayName="StraightEdgeInternal";function os(e){return $.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,sourcePosition:s=O.Bottom,targetPosition:c=O.Top,label:a,labelStyle:l,labelShowBg:f,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:g,markerEnd:p,markerStart:b,pathOptions:x,interactionWidth:E})=>{const[w,y,S]=fi({sourceX:n,sourceY:o,sourcePosition:s,targetX:r,targetY:i,targetPosition:c,curvature:x==null?void 0:x.curvature}),P=e.isInternal?void 0:t;return _.jsx(cn,{id:P,path:w,labelX:y,labelY:S,label:a,labelStyle:l,labelShowBg:f,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:g,markerEnd:p,markerStart:b,interactionWidth:E})})}const Zh=os({isInternal:!1}),rs=os({isInternal:!0});Zh.displayName="BezierEdge";rs.displayName="BezierEdgeInternal";const fr={default:rs,straight:ns,step:es,smoothstep:Qi,simplebezier:Ui},hr={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Qh=(e,t,n)=>n===O.Left?e-t:n===O.Right?e+t:e,Jh=(e,t,n)=>n===O.Top?e-t:n===O.Bottom?e+t:e,gr="react-flow__edgeupdater";function pr({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:r,onMouseEnter:i,onMouseOut:s,type:c}){return _.jsx("circle",{onMouseDown:r,onMouseEnter:i,onMouseOut:s,className:oe([gr,`${gr}-${c}`]),cx:Qh(t,o,e),cy:Jh(n,o,e),r:o,stroke:"transparent",fill:"transparent"})}function eg({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:o,sourceY:r,targetX:i,targetY:s,sourcePosition:c,targetPosition:a,onReconnect:l,onReconnectStart:f,onReconnectEnd:d,setReconnecting:u,setUpdateHover:h}){const g=te(),p=(y,S)=>{if(y.button!==0)return;const{autoPanOnConnect:P,domNode:N,isValidConnection:H,connectionMode:T,connectionRadius:A,lib:L,onConnectStart:R,onConnectEnd:z,cancelConnection:m,nodeLookup:M,rfId:v,panBy:I,updateConnection:C}=g.getState(),k=S.type==="target";u(!0),f==null||f(y,n,S.type);const D=(V,Y)=>{u(!1),d==null||d(V,n,S.type,Y)},j=V=>l==null?void 0:l(n,V);Vn.onPointerDown(y.nativeEvent,{autoPanOnConnect:P,connectionMode:T,connectionRadius:A,domNode:N,handleId:S.id,nodeId:S.nodeId,nodeLookup:M,isTarget:k,edgeUpdaterType:S.type,lib:L,flowId:v,cancelConnection:m,panBy:I,isValidConnection:H,onConnect:j,onConnectStart:R,onConnectEnd:z,onReconnectEnd:D,updateConnection:C,getTransform:()=>g.getState().transform,getFromHandle:()=>g.getState().connection.fromHandle})},b=y=>p(y,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),x=y=>p(y,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),E=()=>h(!0),w=()=>h(!1);return _.jsxs(_.Fragment,{children:[(e===!0||e==="source")&&_.jsx(pr,{position:c,centerX:o,centerY:r,radius:t,onMouseDown:b,onMouseEnter:E,onMouseOut:w,type:"source"}),(e===!0||e==="target")&&_.jsx(pr,{position:a,centerX:i,centerY:s,radius:t,onMouseDown:x,onMouseEnter:E,onMouseOut:w,type:"target"})]})}function tg({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:o,onClick:r,onDoubleClick:i,onContextMenu:s,onMouseEnter:c,onMouseMove:a,onMouseLeave:l,reconnectRadius:f,onReconnect:d,onReconnectStart:u,onReconnectEnd:h,rfId:g,edgeTypes:p,noPanClassName:b,onError:x,disableKeyboardA11y:E}){let w=Q(q=>q.edgeLookup.get(e));const y=Q(q=>q.defaultEdgeOptions);w=y?{...y,...w}:w;let S=w.type||"default",P=(p==null?void 0:p[S])||fr[S];P===void 0&&(x==null||x("011",be.error011(S)),S="default",P=fr.default);const N=!!(w.focusable||t&&typeof w.focusable>"u"),H=typeof d<"u"&&(w.reconnectable||n&&typeof w.reconnectable>"u"),T=!!(w.selectable||o&&typeof w.selectable>"u"),A=$.useRef(null),[L,R]=$.useState(!1),[z,m]=$.useState(!1),M=te(),{zIndex:v,sourceX:I,sourceY:C,targetX:k,targetY:D,sourcePosition:j,targetPosition:V}=Q($.useCallback(q=>{const J=q.nodeLookup.get(w.source),ee=q.nodeLookup.get(w.target);if(!J||!ee)return{zIndex:w.zIndex,...hr};const re=Pd({id:e,sourceNode:J,targetNode:ee,sourceHandle:w.sourceHandle||null,targetHandle:w.targetHandle||null,connectionMode:q.connectionMode,onError:x});return{zIndex:Cd({selected:w.selected,zIndex:w.zIndex,sourceNode:J,targetNode:ee,elevateOnSelect:q.elevateEdgesOnSelect}),...re||hr}},[w.source,w.target,w.sourceHandle,w.targetHandle,w.selected,w.zIndex]),ne),Y=$.useMemo(()=>w.markerStart?`url('#${Ln(w.markerStart,g)}')`:void 0,[w.markerStart,g]),F=$.useMemo(()=>w.markerEnd?`url('#${Ln(w.markerEnd,g)}')`:void 0,[w.markerEnd,g]);if(w.hidden||I===null||C===null||k===null||D===null)return null;const X=q=>{var ue;const{addSelectedEdges:J,unselectNodesAndEdges:ee,multiSelectionActive:re}=M.getState();T&&(M.setState({nodesSelectionActive:!1}),w.selected&&re?(ee({nodes:[],edges:[w]}),(ue=A.current)==null||ue.blur()):J([e])),r&&r(q,w)},W=i?q=>{i(q,{...w})}:void 0,G=s?q=>{s(q,{...w})}:void 0,B=c?q=>{c(q,{...w})}:void 0,U=a?q=>{a(q,{...w})}:void 0,Z=l?q=>{l(q,{...w})}:void 0,K=q=>{var J;if(!E&&Zr.includes(q.key)&&T){const{unselectNodesAndEdges:ee,addSelectedEdges:re}=M.getState();q.key==="Escape"?((J=A.current)==null||J.blur(),ee({edges:[w]})):re([e])}};return _.jsx("svg",{style:{zIndex:v},children:_.jsxs("g",{className:oe(["react-flow__edge",`react-flow__edge-${S}`,w.className,b,{selected:w.selected,animated:w.animated,inactive:!T&&!r,updating:L,selectable:T}]),onClick:X,onDoubleClick:W,onContextMenu:G,onMouseEnter:B,onMouseMove:U,onMouseLeave:Z,onKeyDown:N?K:void 0,tabIndex:N?0:void 0,role:N?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":w.ariaLabel===null?void 0:w.ariaLabel||`Edge from ${w.source} to ${w.target}`,"aria-describedby":N?`${Pi}-${g}`:void 0,ref:A,children:[!z&&_.jsx(P,{id:e,source:w.source,target:w.target,type:w.type,selected:w.selected,animated:w.animated,selectable:T,deletable:w.deletable??!0,label:w.label,labelStyle:w.labelStyle,labelShowBg:w.labelShowBg,labelBgStyle:w.labelBgStyle,labelBgPadding:w.labelBgPadding,labelBgBorderRadius:w.labelBgBorderRadius,sourceX:I,sourceY:C,targetX:k,targetY:D,sourcePosition:j,targetPosition:V,data:w.data,style:w.style,sourceHandleId:w.sourceHandle,targetHandleId:w.targetHandle,markerStart:Y,markerEnd:F,pathOptions:"pathOptions"in w?w.pathOptions:void 0,interactionWidth:w.interactionWidth}),H&&_.jsx(eg,{edge:w,isReconnectable:H,reconnectRadius:f,onReconnect:d,onReconnectStart:u,onReconnectEnd:h,sourceX:I,sourceY:C,targetX:k,targetY:D,sourcePosition:j,targetPosition:V,setUpdateHover:R,setReconnecting:m})]})})}const ng=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function is({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:o,noPanClassName:r,onReconnect:i,onEdgeContextMenu:s,onEdgeMouseEnter:c,onEdgeMouseMove:a,onEdgeMouseLeave:l,onEdgeClick:f,reconnectRadius:d,onEdgeDoubleClick:u,onReconnectStart:h,onReconnectEnd:g,disableKeyboardA11y:p}){const{edgesFocusable:b,edgesReconnectable:x,elementsSelectable:E,onError:w}=Q(ng,ne),y=Bh(t);return _.jsxs("div",{className:"react-flow__edges",children:[_.jsx(Wh,{defaultColor:e,rfId:n}),y.map(S=>_.jsx(tg,{id:S,edgesFocusable:b,edgesReconnectable:x,elementsSelectable:E,noPanClassName:r,onReconnect:i,onContextMenu:s,onMouseEnter:c,onMouseMove:a,onMouseLeave:l,onClick:f,reconnectRadius:d,onDoubleClick:u,onReconnectStart:h,onReconnectEnd:g,rfId:n,onError:w,edgeTypes:o,disableKeyboardA11y:p},S))]})}is.displayName="EdgeRenderer";const og=$.memo(is),rg=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function ig({children:e}){const t=Q(rg);return _.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function sg(e){const t=co(),n=$.useRef(!1);$.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const cg=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function ag(e){const t=Q(cg),n=te();return $.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function ug(e){return e.connection.inProgress?{...e.connection,to:vt(e.connection.to,e.transform)}:{...e.connection}}function lg(e){return ug}function dg(e){const t=lg();return Q(t,ne)}const fg=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function hg({containerStyle:e,style:t,type:n,component:o}){const{nodesConnectable:r,width:i,height:s,isValid:c,inProgress:a}=Q(fg,ne);return!(i&&r&&a)?null:_.jsx("svg",{style:e,width:i,height:s,className:"react-flow__connectionline react-flow__container",children:_.jsx("g",{className:oe(["react-flow__connection",Jr(c)]),children:_.jsx(ss,{style:t,type:n,CustomComponent:o,isValid:c})})})}const ss=({style:e,type:t=Ce.Bezier,CustomComponent:n,isValid:o})=>{const{inProgress:r,from:i,fromNode:s,fromHandle:c,fromPosition:a,to:l,toNode:f,toHandle:d,toPosition:u}=dg();if(!r)return;if(n)return _.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:c,fromX:i.x,fromY:i.y,toX:l.x,toY:l.y,fromPosition:a,toPosition:u,connectionStatus:Jr(o),toNode:f,toHandle:d});let h="";const g={sourceX:i.x,sourceY:i.y,sourcePosition:a,targetX:l.x,targetY:l.y,targetPosition:u};switch(t){case Ce.Bezier:[h]=fi(g);break;case Ce.SimpleBezier:[h]=qi(g);break;case Ce.Step:[h]=Rn({...g,borderRadius:0});break;case Ce.SmoothStep:[h]=Rn(g);break;default:[h]=pi(g)}return _.jsx("path",{d:h,fill:"none",className:"react-flow__connection-path",style:e})};ss.displayName="ConnectionLine";const gg={};function mr(e=gg){$.useRef(e),te(),$.useEffect(()=>{},[e])}function pg(){te(),$.useRef(!1),$.useEffect(()=>{},[])}function cs({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:o,onEdgeClick:r,onNodeDoubleClick:i,onEdgeDoubleClick:s,onNodeMouseEnter:c,onNodeMouseMove:a,onNodeMouseLeave:l,onNodeContextMenu:f,onSelectionContextMenu:d,onSelectionStart:u,onSelectionEnd:h,connectionLineType:g,connectionLineStyle:p,connectionLineComponent:b,connectionLineContainerStyle:x,selectionKeyCode:E,selectionOnDrag:w,selectionMode:y,multiSelectionKeyCode:S,panActivationKeyCode:P,zoomActivationKeyCode:N,deleteKeyCode:H,onlyRenderVisibleElements:T,elementsSelectable:A,defaultViewport:L,translateExtent:R,minZoom:z,maxZoom:m,preventScrolling:M,defaultMarkerColor:v,zoomOnScroll:I,zoomOnPinch:C,panOnScroll:k,panOnScrollSpeed:D,panOnScrollMode:j,zoomOnDoubleClick:V,panOnDrag:Y,onPaneClick:F,onPaneMouseEnter:X,onPaneMouseMove:W,onPaneMouseLeave:G,onPaneScroll:B,onPaneContextMenu:U,paneClickDistance:Z,nodeClickDistance:K,onEdgeContextMenu:q,onEdgeMouseEnter:J,onEdgeMouseMove:ee,onEdgeMouseLeave:re,reconnectRadius:ue,onReconnect:an,onReconnectStart:un,onReconnectEnd:ln,noDragClassName:Ge,noWheelClassName:dn,noPanClassName:Ue,disableKeyboardA11y:Ke,nodeExtent:fn,rfId:Ze,viewport:Qe,onViewportChange:bt}){return mr(e),mr(t),pg(),sg(n),ag(Qe),_.jsx(Th,{onPaneClick:F,onPaneMouseEnter:X,onPaneMouseMove:W,onPaneMouseLeave:G,onPaneContextMenu:U,onPaneScroll:B,paneClickDistance:Z,deleteKeyCode:H,selectionKeyCode:E,selectionOnDrag:w,selectionMode:y,onSelectionStart:u,onSelectionEnd:h,multiSelectionKeyCode:S,panActivationKeyCode:P,zoomActivationKeyCode:N,elementsSelectable:A,zoomOnScroll:I,zoomOnPinch:C,zoomOnDoubleClick:V,panOnScroll:k,panOnScrollSpeed:D,panOnScrollMode:j,panOnDrag:Y,defaultViewport:L,translateExtent:R,minZoom:z,maxZoom:m,onSelectionContextMenu:d,preventScrolling:M,noDragClassName:Ge,noWheelClassName:dn,noPanClassName:Ue,disableKeyboardA11y:Ke,onViewportChange:bt,isControlledViewport:!!Qe,children:_.jsxs(ig,{children:[_.jsx(og,{edgeTypes:t,onEdgeClick:r,onEdgeDoubleClick:s,onReconnect:an,onReconnectStart:un,onReconnectEnd:ln,onlyRenderVisibleElements:T,onEdgeContextMenu:q,onEdgeMouseEnter:J,onEdgeMouseMove:ee,onEdgeMouseLeave:re,reconnectRadius:ue,defaultMarkerColor:v,noPanClassName:Ue,disableKeyboardA11y:Ke,rfId:Ze}),_.jsx(hg,{style:p,type:g,component:b,containerStyle:x}),_.jsx("div",{className:"react-flow__edgelabel-renderer"}),_.jsx(Vh,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:i,onNodeMouseEnter:c,onNodeMouseMove:a,onNodeMouseLeave:l,onNodeContextMenu:f,nodeClickDistance:K,onlyRenderVisibleElements:T,noPanClassName:Ue,noDragClassName:Ge,disableKeyboardA11y:Ke,nodeExtent:fn,rfId:Ze}),_.jsx("div",{className:"react-flow__viewport-portal"})]})})}cs.displayName="GraphView";const mg=$.memo(cs),yr=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:s,nodeOrigin:c,nodeExtent:a}={})=>{const l=new Map,f=new Map,d=new Map,u=new Map,h=o??t??[],g=n??e??[],p=c??[0,0],b=a??lt;yi(d,u,h),jn(g,l,f,{nodeOrigin:p,nodeExtent:b,elevateNodesOnSelect:!1});let x=[0,0,1];if(s&&r&&i){const E=wt(l,{filter:P=>!!((P.width||P.initialWidth)&&(P.height||P.initialHeight))}),{x:w,y,zoom:S}=no(E,r,i,.5,2,.1);x=[w,y,S]}return{rfId:"1",width:0,height:0,transform:x,nodes:g,nodeLookup:l,parentLookup:f,edges:h,edgeLookup:u,connectionLookup:d,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:o!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:lt,nodeExtent:b,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Be.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:p,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...Qr},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:Sd,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},yg=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:s,nodeOrigin:c,nodeExtent:a})=>zf((l,f)=>({...yr({nodes:e,edges:t,width:r,height:i,fitView:s,nodeOrigin:c,nodeExtent:a,defaultNodes:n,defaultEdges:o}),setNodes:d=>{const{nodeLookup:u,parentLookup:h,nodeOrigin:g,elevateNodesOnSelect:p}=f();jn(d,u,h,{nodeOrigin:g,nodeExtent:a,elevateNodesOnSelect:p,checkEquality:!0}),l({nodes:d})},setEdges:d=>{const{connectionLookup:u,edgeLookup:h}=f();yi(u,h,d),l({edges:d})},setDefaultNodesAndEdges:(d,u)=>{if(d){const{setNodes:h}=f();h(d),l({hasDefaultNodes:!0})}if(u){const{setEdges:h}=f();h(u),l({hasDefaultEdges:!0})}},updateNodeInternals:(d,u={triggerFitView:!0})=>{const{triggerNodeChanges:h,nodeLookup:g,parentLookup:p,fitViewOnInit:b,fitViewDone:x,fitViewOnInitOptions:E,domNode:w,nodeOrigin:y,nodeExtent:S,debug:P,fitViewSync:N}=f(),{changes:H,updatedInternals:T}=jd(d,g,p,w,y,S);if(T){if(zd(g,p,{nodeOrigin:y,nodeExtent:S}),u.triggerFitView){let A=x;!x&&b&&(A=N({...E,nodes:E==null?void 0:E.nodes})),l({fitViewDone:A})}else l({});(H==null?void 0:H.length)>0&&(P&&console.log("React Flow: trigger node changes",H),h==null||h(H))}},updateNodePositions:(d,u=!1)=>{const h=[],g=[];for(const[p,b]of d){const x=!!(b!=null&&b.expandParent&&(b!=null&&b.parentId)&&(b!=null&&b.position)),E={id:p,type:"position",position:x?{x:Math.max(0,b.position.x),y:Math.max(0,b.position.y)}:b.position,dragging:u};x&&h.push({id:p,parentId:b.parentId,rect:{...b.internals.positionAbsolute,width:b.measured.width,height:b.measured.height}}),g.push(E)}if(h.length>0){const{nodeLookup:p,parentLookup:b,nodeOrigin:x}=f(),E=so(h,p,b,x);g.push(...E)}f().triggerNodeChanges(g)},triggerNodeChanges:d=>{const{onNodesChange:u,setNodes:h,nodes:g,hasDefaultNodes:p,debug:b}=f();if(d!=null&&d.length){if(p){const x=zi(d,g);h(x)}b&&console.log("React Flow: trigger node changes",d),u==null||u(d)}},triggerEdgeChanges:d=>{const{onEdgesChange:u,setEdges:h,edges:g,hasDefaultEdges:p,debug:b}=f();if(d!=null&&d.length){if(p){const x=Ri(d,g);h(x)}b&&console.log("React Flow: trigger edge changes",d),u==null||u(d)}},addSelectedNodes:d=>{const{multiSelectionActive:u,edgeLookup:h,nodeLookup:g,triggerNodeChanges:p,triggerEdgeChanges:b}=f();if(u){const x=d.map(E=>ke(E,!0));p(x);return}p(ze(g,new Set([...d]),!0)),b(ze(h))},addSelectedEdges:d=>{const{multiSelectionActive:u,edgeLookup:h,nodeLookup:g,triggerNodeChanges:p,triggerEdgeChanges:b}=f();if(u){const x=d.map(E=>ke(E,!0));b(x);return}b(ze(h,new Set([...d]))),p(ze(g,new Set,!0))},unselectNodesAndEdges:({nodes:d,edges:u}={})=>{const{edges:h,nodes:g,nodeLookup:p,triggerNodeChanges:b,triggerEdgeChanges:x}=f(),E=d||g,w=u||h,y=E.map(P=>{const N=p.get(P.id);return N&&(N.selected=!1),ke(P.id,!1)}),S=w.map(P=>ke(P.id,!1));b(y),x(S)},setMinZoom:d=>{const{panZoom:u,maxZoom:h}=f();u==null||u.setScaleExtent([d,h]),l({minZoom:d})},setMaxZoom:d=>{const{panZoom:u,minZoom:h}=f();u==null||u.setScaleExtent([h,d]),l({maxZoom:d})},setTranslateExtent:d=>{var u;(u=f().panZoom)==null||u.setTranslateExtent(d),l({translateExtent:d})},setPaneClickDistance:d=>{var u;(u=f().panZoom)==null||u.setClickDistance(d)},resetSelectedElements:()=>{const{edges:d,nodes:u,triggerNodeChanges:h,triggerEdgeChanges:g}=f(),p=u.reduce((x,E)=>E.selected?[...x,ke(E.id,!1)]:x,[]),b=d.reduce((x,E)=>E.selected?[...x,ke(E.id,!1)]:x,[]);h(p),g(b)},setNodeExtent:d=>{const{nodes:u,nodeLookup:h,parentLookup:g,nodeOrigin:p,elevateNodesOnSelect:b,nodeExtent:x}=f();d[0][0]===x[0][0]&&d[0][1]===x[0][1]&&d[1][0]===x[1][0]&&d[1][1]===x[1][1]||(jn(u,h,g,{nodeOrigin:p,nodeExtent:d,elevateNodesOnSelect:b,checkEquality:!1}),l({nodeExtent:d}))},panBy:d=>{const{transform:u,width:h,height:g,panZoom:p,translateExtent:b}=f();return Vd({delta:d,panZoom:p,transform:u,translateExtent:b,width:h,height:g})},fitView:d=>{const{panZoom:u,width:h,height:g,minZoom:p,maxZoom:b,nodeLookup:x}=f();if(!u)return Promise.resolve(!1);const E=Pn(x,d);return Dn({nodes:E,width:h,height:g,panZoom:u,minZoom:p,maxZoom:b},d)},fitViewSync:d=>{const{panZoom:u,width:h,height:g,minZoom:p,maxZoom:b,nodeLookup:x}=f();if(!u)return!1;const E=Pn(x,d);return Dn({nodes:E,width:h,height:g,panZoom:u,minZoom:p,maxZoom:b},d),E.size>0},cancelConnection:()=>{l({connection:{...Qr}})},updateConnection:d=>{l({connection:d})},reset:()=>l({...yr()})}),Object.is);function xg({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:o,initialWidth:r,initialHeight:i,fitView:s,nodeOrigin:c,nodeExtent:a,children:l}){const[f]=$.useState(()=>yg({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:s,nodeOrigin:c,nodeExtent:a}));return _.jsx(Rf,{value:f,children:_.jsx(sh,{children:l})})}function wg({children:e,nodes:t,edges:n,defaultNodes:o,defaultEdges:r,width:i,height:s,fitView:c,nodeOrigin:a,nodeExtent:l}){return $.useContext(on)?_.jsx(_.Fragment,{children:e}):_.jsx(xg,{initialNodes:t,initialEdges:n,defaultNodes:o,defaultEdges:r,initialWidth:i,initialHeight:s,fitView:c,nodeOrigin:a,nodeExtent:l,children:e})}const vg={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function bg({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:r,nodeTypes:i,edgeTypes:s,onNodeClick:c,onEdgeClick:a,onInit:l,onMove:f,onMoveStart:d,onMoveEnd:u,onConnect:h,onConnectStart:g,onConnectEnd:p,onClickConnectStart:b,onClickConnectEnd:x,onNodeMouseEnter:E,onNodeMouseMove:w,onNodeMouseLeave:y,onNodeContextMenu:S,onNodeDoubleClick:P,onNodeDragStart:N,onNodeDrag:H,onNodeDragStop:T,onNodesDelete:A,onEdgesDelete:L,onDelete:R,onSelectionChange:z,onSelectionDragStart:m,onSelectionDrag:M,onSelectionDragStop:v,onSelectionContextMenu:I,onSelectionStart:C,onSelectionEnd:k,onBeforeDelete:D,connectionMode:j,connectionLineType:V=Ce.Bezier,connectionLineStyle:Y,connectionLineComponent:F,connectionLineContainerStyle:X,deleteKeyCode:W="Backspace",selectionKeyCode:G="Shift",selectionOnDrag:B=!1,selectionMode:U=dt.Full,panActivationKeyCode:Z="Space",multiSelectionKeyCode:K=Xt()?"Meta":"Control",zoomActivationKeyCode:q=Xt()?"Meta":"Control",snapToGrid:J,snapGrid:ee,onlyRenderVisibleElements:re=!1,selectNodesOnDrag:ue,nodesDraggable:an,nodesConnectable:un,nodesFocusable:ln,nodeOrigin:Ge=Di,edgesFocusable:dn,edgesReconnectable:Ue,elementsSelectable:Ke=!0,defaultViewport:fn=Kf,minZoom:Ze=.5,maxZoom:Qe=2,translateExtent:bt=lt,preventScrolling:ds=!0,nodeExtent:hn,defaultMarkerColor:fs="#b1b1b7",zoomOnScroll:hs=!0,zoomOnPinch:gs=!0,panOnScroll:ps=!1,panOnScrollSpeed:ms=.5,panOnScrollMode:ys=Ae.Free,zoomOnDoubleClick:xs=!0,panOnDrag:ws=!0,onPaneClick:vs,onPaneMouseEnter:bs,onPaneMouseMove:_s,onPaneMouseLeave:Es,onPaneScroll:Ss,onPaneContextMenu:Ns,paneClickDistance:uo=0,nodeClickDistance:Cs=0,children:Ms,onReconnect:ks,onReconnectStart:Is,onReconnectEnd:$s,onEdgeContextMenu:As,onEdgeDoubleClick:Ts,onEdgeMouseEnter:Ps,onEdgeMouseMove:Ds,onEdgeMouseLeave:Hs,reconnectRadius:zs=10,onNodesChange:Rs,onEdgesChange:Ls,noDragClassName:js="nodrag",noWheelClassName:Vs="nowheel",noPanClassName:lo="nopan",fitView:fo,fitViewOptions:Bs,connectOnClick:Fs,attributionPosition:Os,proOptions:Xs,defaultEdgeOptions:Ys,elevateNodesOnSelect:Ws,elevateEdgesOnSelect:qs,disableKeyboardA11y:ho=!1,autoPanOnConnect:Gs,autoPanOnNodeDrag:Us,autoPanSpeed:Ks,connectionRadius:Zs,isValidConnection:Qs,onError:Js,style:ec,id:go,nodeDragThreshold:tc,viewport:nc,onViewportChange:oc,width:rc,height:ic,colorMode:sc="light",debug:cc,...ac},uc){const gn=go||"1",lc=eh(sc);return _.jsx("div",{"data-testid":"rf__wrapper",...ac,style:{...ec,...vg},ref:uc,className:oe(["react-flow",r,lc]),id:go,children:_.jsxs(wg,{nodes:e,edges:t,width:rc,height:ic,fitView:fo,nodeOrigin:Ge,nodeExtent:hn,children:[_.jsx(mg,{onInit:l,onNodeClick:c,onEdgeClick:a,onNodeMouseEnter:E,onNodeMouseMove:w,onNodeMouseLeave:y,onNodeContextMenu:S,onNodeDoubleClick:P,nodeTypes:i,edgeTypes:s,connectionLineType:V,connectionLineStyle:Y,connectionLineComponent:F,connectionLineContainerStyle:X,selectionKeyCode:G,selectionOnDrag:B,selectionMode:U,deleteKeyCode:W,multiSelectionKeyCode:K,panActivationKeyCode:Z,zoomActivationKeyCode:q,onlyRenderVisibleElements:re,defaultViewport:fn,translateExtent:bt,minZoom:Ze,maxZoom:Qe,preventScrolling:ds,zoomOnScroll:hs,zoomOnPinch:gs,zoomOnDoubleClick:xs,panOnScroll:ps,panOnScrollSpeed:ms,panOnScrollMode:ys,panOnDrag:ws,onPaneClick:vs,onPaneMouseEnter:bs,onPaneMouseMove:_s,onPaneMouseLeave:Es,onPaneScroll:Ss,onPaneContextMenu:Ns,paneClickDistance:uo,nodeClickDistance:Cs,onSelectionContextMenu:I,onSelectionStart:C,onSelectionEnd:k,onReconnect:ks,onReconnectStart:Is,onReconnectEnd:$s,onEdgeContextMenu:As,onEdgeDoubleClick:Ts,onEdgeMouseEnter:Ps,onEdgeMouseMove:Ds,onEdgeMouseLeave:Hs,reconnectRadius:zs,defaultMarkerColor:fs,noDragClassName:js,noWheelClassName:Vs,noPanClassName:lo,rfId:gn,disableKeyboardA11y:ho,nodeExtent:hn,viewport:nc,onViewportChange:oc}),_.jsx(Jf,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:h,onConnectStart:g,onConnectEnd:p,onClickConnectStart:b,onClickConnectEnd:x,nodesDraggable:an,nodesConnectable:un,nodesFocusable:ln,edgesFocusable:dn,edgesReconnectable:Ue,elementsSelectable:Ke,elevateNodesOnSelect:Ws,elevateEdgesOnSelect:qs,minZoom:Ze,maxZoom:Qe,nodeExtent:hn,onNodesChange:Rs,onEdgesChange:Ls,snapToGrid:J,snapGrid:ee,connectionMode:j,translateExtent:bt,connectOnClick:Fs,defaultEdgeOptions:Ys,fitView:fo,fitViewOptions:Bs,onNodesDelete:A,onEdgesDelete:L,onDelete:R,onNodeDragStart:N,onNodeDrag:H,onNodeDragStop:T,onSelectionDrag:M,onSelectionDragStart:m,onSelectionDragStop:v,onMove:f,onMoveStart:d,onMoveEnd:u,noPanClassName:lo,nodeOrigin:Ge,rfId:gn,autoPanOnConnect:Gs,autoPanOnNodeDrag:Us,autoPanSpeed:Ks,onError:Js,connectionRadius:Zs,isValidConnection:Qs,selectNodesOnDrag:ue,nodeDragThreshold:tc,onBeforeDelete:D,paneClickDistance:uo,debug:cc}),_.jsx(Uf,{onSelectionChange:z}),Ms,_.jsx(Xf,{proOptions:Xs,position:Os}),_.jsx(Ff,{rfId:gn,disableKeyboardA11y:ho})]})})}var _g=Li(bg);function Eg(e){const[t,n]=$.useState(e),o=$.useCallback(r=>n(i=>zi(r,i)),[]);return[t,n,o]}function Sg(e){const[t,n]=$.useState(e),o=$.useCallback(r=>n(i=>Ri(r,i)),[]);return[t,n,o]}function Ng({dimensions:e,lineWidth:t,variant:n,className:o}){return _.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:oe(["react-flow__background-pattern",n,o])})}function Cg({radius:e,className:t}){return _.jsx("circle",{cx:e,cy:e,r:e,className:oe(["react-flow__background-pattern","dots",t])})}var Me;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Me||(Me={}));const Mg={[Me.Dots]:1,[Me.Lines]:1,[Me.Cross]:6},kg=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function as({id:e,variant:t=Me.Dots,gap:n=20,size:o,lineWidth:r=1,offset:i=0,color:s,bgColor:c,style:a,className:l,patternClassName:f}){const d=$.useRef(null),{transform:u,patternId:h}=Q(kg,ne),g=o||Mg[t],p=t===Me.Dots,b=t===Me.Cross,x=Array.isArray(n)?n:[n,n],E=[x[0]*u[2]||1,x[1]*u[2]||1],w=g*u[2],y=Array.isArray(i)?i:[i,i],S=b?[w,w]:E,P=[y[0]*u[2]||1+S[0]/2,y[1]*u[2]||1+S[1]/2],N=`${h}${e||""}`;return _.jsxs("svg",{className:oe(["react-flow__background",l]),style:{...a,...sn,"--xy-background-color-props":c,"--xy-background-pattern-color-props":s},ref:d,"data-testid":"rf__background",children:[_.jsx("pattern",{id:N,x:u[0]%E[0],y:u[1]%E[1],width:E[0],height:E[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${P[0]},-${P[1]})`,children:p?_.jsx(Cg,{radius:w/2,className:f}):_.jsx(Ng,{dimensions:S,lineWidth:r,variant:t,className:f})}),_.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${N})`})]})}as.displayName="Background";const Ig=$.memo(as);function $g(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:_.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Ag(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:_.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Tg(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:_.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Pg(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:_.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Dg(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:_.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function $t({children:e,className:t,...n}){return _.jsx("button",{type:"button",className:oe(["react-flow__controls-button",t]),...n,children:e})}const Hg=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function us({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:r,onZoomIn:i,onZoomOut:s,onFitView:c,onInteractiveChange:a,className:l,children:f,position:d="bottom-left",orientation:u="vertical","aria-label":h="React Flow controls"}){const g=te(),{isInteractive:p,minZoomReached:b,maxZoomReached:x}=Q(Hg,ne),{zoomIn:E,zoomOut:w,fitView:y}=co(),S=()=>{E(),i==null||i()},P=()=>{w(),s==null||s()},N=()=>{y(r),c==null||c()},H=()=>{g.setState({nodesDraggable:!p,nodesConnectable:!p,elementsSelectable:!p}),a==null||a(!p)},T=u==="horizontal"?"horizontal":"vertical";return _.jsxs(rn,{className:oe(["react-flow__controls",T,l]),position:d,style:e,"data-testid":"rf__controls","aria-label":h,children:[t&&_.jsxs(_.Fragment,{children:[_.jsx($t,{onClick:S,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:x,children:_.jsx($g,{})}),_.jsx($t,{onClick:P,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b,children:_.jsx(Ag,{})})]}),n&&_.jsx($t,{className:"react-flow__controls-fitview",onClick:N,title:"fit view","aria-label":"fit view",children:_.jsx(Tg,{})}),o&&_.jsx($t,{className:"react-flow__controls-interactive",onClick:H,title:"toggle interactivity","aria-label":"toggle interactivity",children:p?_.jsx(Dg,{}):_.jsx(Pg,{})}),f]})}us.displayName="Controls";const zg=$.memo(us);function Rg({id:e,x:t,y:n,width:o,height:r,style:i,color:s,strokeColor:c,strokeWidth:a,className:l,borderRadius:f,shapeRendering:d,selected:u,onClick:h}){const{background:g,backgroundColor:p}=i||{},b=s||g||p;return _.jsx("rect",{className:oe(["react-flow__minimap-node",{selected:u},l]),x:t,y:n,rx:f,ry:f,width:o,height:r,style:{fill:b,stroke:c,strokeWidth:a},shapeRendering:d,onClick:h?x=>h(x,e):void 0})}const Lg=$.memo(Rg),jg=e=>e.nodes.map(t=>t.id),Sn=e=>e instanceof Function?e:()=>e;function Vg({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:o=5,nodeStrokeWidth:r,nodeComponent:i=Lg,onClick:s}){const c=Q(jg,ne),a=Sn(t),l=Sn(e),f=Sn(n),d=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return _.jsx(_.Fragment,{children:c.map(u=>_.jsx(Fg,{id:u,nodeColorFunc:a,nodeStrokeColorFunc:l,nodeClassNameFunc:f,nodeBorderRadius:o,nodeStrokeWidth:r,NodeComponent:i,onClick:s,shapeRendering:d},u))})}function Bg({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:o,nodeBorderRadius:r,nodeStrokeWidth:i,shapeRendering:s,NodeComponent:c,onClick:a}){const{node:l,x:f,y:d,width:u,height:h}=Q(g=>{const p=g.nodeLookup.get(e),{x:b,y:x}=p.internals.positionAbsolute,{width:E,height:w}=_e(p);return{node:p,x:b,y:x,width:E,height:w}},ne);return!l||l.hidden||!ci(l)?null:_.jsx(c,{x:f,y:d,width:u,height:h,style:l.style,selected:!!l.selected,className:o(l),color:t(l),borderRadius:r,strokeColor:n(l),strokeWidth:i,shapeRendering:s,onClick:a,id:l.id})}const Fg=$.memo(Bg);var Og=$.memo(Vg);const Xg=200,Yg=150,Wg=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?ii(wt(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},qg="react-flow__minimap-desc";function ls({style:e,className:t,nodeStrokeColor:n,nodeColor:o,nodeClassName:r="",nodeBorderRadius:i=5,nodeStrokeWidth:s,nodeComponent:c,bgColor:a,maskColor:l,maskStrokeColor:f,maskStrokeWidth:d,position:u="bottom-right",onClick:h,onNodeClick:g,pannable:p=!1,zoomable:b=!1,ariaLabel:x="React Flow mini map",inversePan:E,zoomStep:w=10,offsetScale:y=5}){const S=te(),P=$.useRef(null),{boundingRect:N,viewBB:H,rfId:T,panZoom:A,translateExtent:L,flowWidth:R,flowHeight:z}=Q(Wg,ne),m=(e==null?void 0:e.width)??Xg,M=(e==null?void 0:e.height)??Yg,v=N.width/m,I=N.height/M,C=Math.max(v,I),k=C*m,D=C*M,j=y*C,V=N.x-(k-N.width)/2-j,Y=N.y-(D-N.height)/2-j,F=k+j*2,X=D+j*2,W=`${qg}-${T}`,G=$.useRef(0),B=$.useRef();G.current=C,$.useEffect(()=>{if(P.current&&A)return B.current=Gd({domNode:P.current,panZoom:A,getTransform:()=>S.getState().transform,getViewScale:()=>G.current}),()=>{var K;(K=B.current)==null||K.destroy()}},[A]),$.useEffect(()=>{var K;(K=B.current)==null||K.update({translateExtent:L,width:R,height:z,inversePan:E,pannable:p,zoomStep:w,zoomable:b})},[p,b,E,w,L,R,z]);const U=h?K=>{var ee;const[q,J]=((ee=B.current)==null?void 0:ee.pointer(K))||[0,0];h(K,{x:q,y:J})}:void 0,Z=g?$.useCallback((K,q)=>{const J=S.getState().nodeLookup.get(q);g(K,J)},[]):void 0;return _.jsx(rn,{position:u,style:{...e,"--xy-minimap-background-color-props":typeof a=="string"?a:void 0,"--xy-minimap-mask-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-stroke-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-width-props":typeof d=="number"?d*C:void 0,"--xy-minimap-node-background-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="string"?s:void 0},className:oe(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:_.jsxs("svg",{width:m,height:M,viewBox:`${V} ${Y} ${F} ${X}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":W,ref:P,onClick:U,children:[x&&_.jsx("title",{id:W,children:x}),_.jsx(Og,{onClick:Z,nodeColor:o,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:r,nodeStrokeWidth:s,nodeComponent:c}),_.jsx("path",{className:"react-flow__minimap-mask",d:`M${V-j},${Y-j}h${F+j*2}v${X+j*2}h${-F-j*2}z
        M${H.x},${H.y}h${H.width}v${H.height}h${-H.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}ls.displayName="MiniMap";$.memo(ls);function Gg({nodeId:e,position:t,variant:n=rt.Handle,className:o,style:r={},children:i,color:s,minWidth:c=10,minHeight:a=10,maxWidth:l=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:d=!1,shouldResize:u,onResizeStart:h,onResize:g,onResizeEnd:p}){const b=Fi(),x=typeof e=="string"?e:b,E=te(),w=$.useRef(null),y=n===rt.Line?"right":"bottom-right",S=t??y,P=$.useRef(null);$.useEffect(()=>{if(!(!w.current||!x))return P.current||(P.current=lf({domNode:w.current,nodeId:x,getStoreItems:()=>{const{nodeLookup:A,transform:L,snapGrid:R,snapToGrid:z,nodeOrigin:m,domNode:M}=E.getState();return{nodeLookup:A,transform:L,snapGrid:R,snapToGrid:z,nodeOrigin:m,paneDomNode:M}},onChange:(A,L)=>{const{triggerNodeChanges:R,nodeLookup:z,parentLookup:m,nodeOrigin:M}=E.getState(),v=[],I={x:A.x,y:A.y},C=z.get(x);if(C&&C.expandParent&&C.parentId){const k=C.origin??M,D=A.width??C.measured.width,j=A.height??C.measured.height,V={id:C.id,parentId:C.parentId,rect:{width:D,height:j,...ai({x:A.x??C.position.x,y:A.y??C.position.y},{width:D,height:j},C.parentId,z,k)}},Y=so([V],z,m,M);v.push(...Y),I.x=A.x?Math.max(k[0]*D,A.x):void 0,I.y=A.y?Math.max(k[1]*j,A.y):void 0}if(I.x!==void 0&&I.y!==void 0){const k={id:x,type:"position",position:{...I}};v.push(k)}if(A.width!==void 0&&A.height!==void 0){const k={id:x,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:A.width,height:A.height}};v.push(k)}for(const k of L){const D={...k,type:"position"};v.push(D)}R(v)},onEnd:()=>{const A={id:x,type:"dimensions",resizing:!1};E.getState().triggerNodeChanges([A])}})),P.current.update({controlPosition:S,boundaries:{minWidth:c,minHeight:a,maxWidth:l,maxHeight:f},keepAspectRatio:d,onResizeStart:h,onResize:g,onResizeEnd:p,shouldResize:u}),()=>{var A;(A=P.current)==null||A.destroy()}},[S,c,a,l,f,d,h,g,p,u]);const N=S.split("-"),H=n===rt.Line?"borderColor":"backgroundColor",T=s?{...r,[H]:s}:r;return _.jsx("div",{className:oe(["react-flow__resize-control","nodrag",...N,n,o]),ref:w,style:T,children:i})}$.memo(Gg);const Ug=({data:e})=>_.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg p-4 border border-gray-200 min-w-[200px]",children:[_.jsx(De,{type:"target",position:O.Top,id:"a",style:{width:16,height:16,backgroundColor:"#2563EB"}}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("h3",{className:"font-semibold text-lg text-gray-800",children:e.label||"Node Title"}),e.status&&_.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:e.status})]}),e.description&&_.jsx("p",{className:"text-sm text-gray-600",children:e.description}),e.details&&_.jsx("div",{className:"border-t border-gray-200 pt-2 mt-2",children:_.jsx("dl",{className:"space-y-1",children:Object.entries(e.details).map(([t,n])=>_.jsxs("div",{className:"flex justify-between text-sm",children:[_.jsxs("dt",{className:"text-gray-500",children:[t,":"]}),_.jsx("dd",{className:"font-medium text-gray-900",children:n})]},t))})}),e.actions&&_.jsx("div",{className:"flex gap-2 mt-3",children:e.actions.map((t,n)=>_.jsx("button",{onClick:t.onClick,className:"px-3 py-1 text-sm font-medium rounded-md bg-blue-50 text-blue-600 hover:bg-blue-100 transition-colors",children:t.label},n))})]}),_.jsx(De,{type:"source",position:O.Bottom,id:"b",style:{width:16,height:16,backgroundColor:"#2563EB"}})]}),Kg=({data:e})=>_.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg p-4 border border-gray-200 min-w-[200px]",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsxs(bc,{children:[_.jsx(xc,{className:"text-2xl text-gray-800"}),_.jsx("h3",{className:"font-semibold text-lg text-gray-800",children:e.label||"Node Title"})]}),e.description&&_.jsx("p",{className:"text-sm text-gray-600",children:e.description}),e.details&&_.jsx("div",{className:"border-t border-gray-200 pt-2 mt-2",children:_.jsx("dl",{className:"space-y-1",children:Object.entries(e.details).map(([t,n])=>_.jsxs("div",{className:"flex justify-between text-sm",children:[_.jsxs("dt",{className:"text-gray-500",children:[t,":"]}),_.jsx("dd",{className:"font-medium text-gray-900",children:n})]},t))})}),e.actions&&_.jsx("div",{className:"flex gap-2 mt-3",children:e.actions.map((t,n)=>_.jsx("button",{onClick:t.onClick,className:"px-3 py-1 text-sm font-medium rounded-md bg-blue-50 text-blue-600 hover:bg-blue-100 transition-colors",children:t.label},n))})]}),_.jsx(De,{type:"source",position:O.Bottom,id:"b",style:{width:16,height:16,backgroundColor:"#2563EB"}})]}),Zg={custom:Ug,artifact:Kg},Qg=[{id:"1",type:"custom",position:{x:250,y:100},data:{label:"Custom Node",status:"Active",description:"This is a custom node with various features",details:{Created:"2024-02-06",Priority:"High",Owner:"John Doe"},actions:[{label:"Edit",onClick:()=>console.log("Edit clicked")},{label:"Delete",onClick:()=>console.log("Delete clicked")}]}},{id:"2",type:"artifact",position:{x:100,y:100},data:{label:"Artifact",status:"Pending",description:"This is an artifact node with various features",details:{Created:"2024-02-06",Priority:"High",Owner:"John Doe"},actions:[{label:"Edit",onClick:()=>console.log("Edit clicked")},{label:"Delete",onClick:()=>console.log("Delete clicked")}]}}],Jg=[],mp=pc(function(){const[t,n,o]=Eg(Qg),[r,i,s]=Sg(Jg),c=$.useCallback(f=>i(d=>gi(f,d)),[i]),a=f=>{const u={id:(t.length+1).toString(),position:{x:100,y:100}};n([...t,u])},l=()=>xr.openConfirmModal({modalId:"add-node",title:"Select a node type",children:_.jsx(ep,{addNode:a}),labels:{confirm:"Confirm",cancel:"Cancel"},onCancel:()=>console.log("Cancel"),onConfirm:()=>console.log("Confirmed")});return _.jsx(On,{h:"100%",w:"100%",children:_.jsxs(_g,{nodes:t,nodeTypes:Zg,edges:r,onNodesChange:o,onEdgesChange:s,proOptions:{hideAttribution:!0},onConnect:c,children:[_.jsx(rn,{position:"bottom-right",children:_.jsxs(se,{trigger:"hover",children:[_.jsx(se.Target,{children:_.jsx(wc,{size:"xl",radius:"xl",children:_.jsx(vc,{})})}),_.jsxs(se.Dropdown,{children:[_.jsx(se.Item,{onClick:l,children:"New Node"}),_.jsx(se.Item,{children:"New Edge"})]})]})}),_.jsx(zg,{}),_.jsx(Ig,{variant:"dots",gap:12,size:1})]})})}),ep=({addNode:e})=>_.jsxs(Ic,{cols:2,flex:1,children:[_.jsx(po,{withBorder:!0,onClick:()=>{e("custom"),xr.close("add-node")},children:"Artifact"}),_.jsx(po,{withBorder:!0,children:"Node 2"})]});export{mp as default};
